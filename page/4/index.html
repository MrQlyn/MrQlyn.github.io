<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>シェンキンリンのブログ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="シェンキンリンのブログ">
<meta property="og:url" content="https://github.com/MrQlyn/MrQlyn.github.io/page/4/index.html">
<meta property="og:site_name" content="シェンキンリンのブログ">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="シェンキンリンのブログ">
  
    <link rel="alternate" href="/atom.xml" title="シェンキンリンのブログ" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">シェンキンリンのブログ</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Learning records of a typist</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/MrQlyn/MrQlyn.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-java基础/Java反射代码" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/14/java基础/Java反射代码/" class="article-date">
  <time datetime="2019-07-14T02:54:45.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/14/java基础/Java反射代码/">Java反射代码</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
           <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"> package Reflect;</span><br><span class="line"></span><br><span class="line">import java.lang.reflect.Field;</span><br><span class="line">import java.lang.reflect.Method;</span><br><span class="line">import java.util.Properties;</span><br><span class="line"></span><br><span class="line">public class test &#123;</span><br><span class="line">	/*</span><br><span class="line">	 * 全类名：包名.类名</span><br><span class="line">	 * Class类的三种获取方法</span><br><span class="line">	      1、通过类静态class属性获得Class对象,或者使用实例化对象的getClass()方法</span><br><span class="line">	      2、 使用Class.forName(全类名String)获得类Class静态属性</span><br><span class="line">	      3、使用this.getClass().getClassLoader()获取类加载器（ClassLoader类），</span><br><span class="line">		          使用ClassLoader类loadClass(全类名String)方法获取Class对象</span><br><span class="line">		          </span><br><span class="line">	 * Class:可以获得实例化对象，或者获得属性类Field，方法类Method</span><br><span class="line">	 * newInstance()：获取实例化对象，该类需要有无参构造方法</span><br><span class="line">	 * getField(String name):根据属性名获取公共属性(public)对象Field</span><br><span class="line">	 * getFields():获取所有公共属性(public)对象Field数组</span><br><span class="line">	 * getDeclaredField(String name):根据属性名可获取所有属性(private、protected、public)对象Field</span><br><span class="line">	 * getDeclaredFields():获取所有属性(private、protected、public)对象Field数组</span><br><span class="line">	 * getMethod(String name,Class[] parameterTypes):根据方法名,方法传入参数Class数组获取公共</span><br><span class="line">	 *                                               方法对象(public)Method</span><br><span class="line">	 * getMethods():获取所有公共方法(public)对象Method数组</span><br><span class="line">	 * getDeclaredMethod(String name,Class[] parameterTypes):根据方法名,方法传入参数Class数组可获取所有</span><br><span class="line">	 *                                                       方法(private、protected、public)对象Method</span><br><span class="line">	 * getDeclaredMethods():获取所有方法(private、protected、public)对象Method数组</span><br><span class="line">	 * </span><br><span class="line">	 * </span><br><span class="line">	 * Field:属性类</span><br><span class="line">	 * set(Object,T value):设置Object实例化对象的属性值为T</span><br><span class="line">	 * setAccessible(true)：设置私有属性可被外部反射修改</span><br><span class="line">	 * get():返回当前属性值</span><br><span class="line">	 * </span><br><span class="line">	 * </span><br><span class="line">	 * Method:方法类</span><br><span class="line">	 * setAccessible(true)：设置私有方法可被外部反射调用</span><br><span class="line">	 * invoke(String methodName,Object[] parameterValue):调用当前方法,methodName为方法名，</span><br><span class="line">	 *                                                   parameterValue为传入参数，返回值为方法返回值</span><br><span class="line">	 */</span><br><span class="line">	public static void main(String[] args) throws Exception &#123;</span><br><span class="line">		//Class类的三种获取方法</span><br><span class="line">		//通过类静态class属性获得Class对象,或者使用实例化对象的getClass()方法，或者</span><br><span class="line">		//使用Class.forName(全类名String)获得类Class静态属性，或者</span><br><span class="line">		//使用this.getClass().getClassLoader()获取类加载器（ClassLoader类），使用ClassLoader类loadClass(全类名String)方法获取</span><br><span class="line">		Class clazz=Person.class;</span><br><span class="line">		System.out.println(clazz.getName());</span><br><span class="line">		</span><br><span class="line">		//通过Class对象newInstance()方法获得实例化对象</span><br><span class="line">		Person person=(Person) clazz.newInstance();</span><br><span class="line">		</span><br><span class="line">		//获得变量(公共变量用getField方法，私有变量、保护变量用getDeclaredField方法,同时)</span><br><span class="line">		Field field=clazz.getField(&quot;name&quot;);</span><br><span class="line">		field.set(person, &quot;小明&quot;);//使用Field对象的set(Object,XXX)方法:Object为具体实例化对象，XXX为修改值</span><br><span class="line">		</span><br><span class="line">		Field field2=clazz.getDeclaredField(&quot;age&quot;);	//获取私有变量、保护变量方法,也可以获取公共变量</span><br><span class="line">		Field field3=clazz.getDeclaredField(&quot;name&quot;);//</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		field2.setAccessible(true);					//使得私有变量可被修改</span><br><span class="line">		field2.set(person, 12);</span><br><span class="line">		field3.set(person, &quot;小红&quot;);</span><br><span class="line">		//获得方法</span><br><span class="line">		Method display=clazz.getMethod(&quot;display&quot;);</span><br><span class="line">		//使用Method对象的invoke调用方法</span><br><span class="line">		display.invoke(person);</span><br><span class="line">		</span><br><span class="line">		//person.setAge(13);</span><br><span class="line">		System.out.println(person.toString());</span><br><span class="line">		</span><br><span class="line">		//读取配置文件，获得Properties对象，利用方法getProperty(String key)获取value值</span><br><span class="line">		ReflectTool reflectTool=new ReflectTool();</span><br><span class="line">		Properties properties=reflectTool.getProperties(&quot;Reflect/my.properties&quot;);</span><br><span class="line">		System.out.println(properties.getProperty(&quot;username&quot;));</span><br><span class="line"></span><br><span class="line">		test2();</span><br><span class="line">	&#125;</span><br><span class="line">	private static void test2() throws Exception &#123;</span><br><span class="line">		Class clazz=Class.forName(&quot;Reflect.Person&quot;);</span><br><span class="line">		Field[] field=clazz.getDeclaredFields();</span><br><span class="line">		for (int i = 0; i &lt; field.length; i++) &#123;</span><br><span class="line">			System.out.println(field[i].toString());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Person&#123;</span><br><span class="line">	public String name;</span><br><span class="line">	private int age;</span><br><span class="line">	public Person() &#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	public Person(String name, int age) &#123;</span><br><span class="line">		this.name = name;</span><br><span class="line">		this.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getName() &#123;</span><br><span class="line">		return name;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setName(String name) &#123;</span><br><span class="line">		this.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	public int getAge() &#123;</span><br><span class="line">		return age;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setAge(int age) &#123;</span><br><span class="line">		this.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	public void display() &#123;</span><br><span class="line">		System.out.println(&quot;这是一个人&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">	public int display(int age,String name) &#123;</span><br><span class="line">		System.out.println(&quot;这是一个人&quot;);</span><br><span class="line">		return 1;</span><br><span class="line">	&#125;</span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return &quot;Person [name=&quot; + name + &quot;, age=&quot; + age + &quot;]&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/MrQlyn/MrQlyn.github.io/2019/07/14/java基础/Java反射代码/" data-id="ckib6pxa3003l5gtpk27gtjvc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java基础/">Java基础</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java基础/ReflectTool" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/14/java基础/ReflectTool/" class="article-date">
  <time datetime="2019-07-14T02:54:06.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/14/java基础/ReflectTool/">ReflectTool</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
           <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"> package Reflect;</span><br><span class="line"></span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.lang.reflect.Field;</span><br><span class="line">import java.lang.reflect.Method;</span><br><span class="line">import java.util.Properties;</span><br><span class="line"></span><br><span class="line">public class ReflectTool&#123;</span><br><span class="line">	//根据全类名获得实例化对象(全类名：包名.类名)</span><br><span class="line">	public Object getObject(String className) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			Class clazz=Class.forName(className);</span><br><span class="line">			return clazz.newInstance();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			throw new RuntimeException(e);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	//根据实例化对象获得实例化对象</span><br><span class="line">	public Object getObject(Object object) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			Class clazz=object.getClass();</span><br><span class="line">			return clazz.newInstance();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			throw new RuntimeException(e);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	//根据全类名获得Class对象(全类名：包名.类名)</span><br><span class="line">	public static Class getClass(String className) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			return Class.forName(className);</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			throw new RuntimeException(e);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	//根据实例化对象获得Class对象</span><br><span class="line">	public static Class getClass(Object object) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			return object.getClass();</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			throw new RuntimeException(e);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	//根据实例化对象、属性名设置某属性值</span><br><span class="line">	public static &lt;T&gt; void setValue(Object object,String fieldName,T value) &#123;</span><br><span class="line">		Class clazz=getClass(object);</span><br><span class="line">		try &#123;</span><br><span class="line">			Field field=clazz.getField(fieldName);</span><br><span class="line">			field.setAccessible(true); 			//使得私有变量可以修改</span><br><span class="line">			field.set(object, value);</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; </span><br><span class="line">	&#125;</span><br><span class="line">	//根据实例化对象、属性名获取某属性</span><br><span class="line">	public static &lt;T&gt; T getValue(Object object,String fieldName) &#123;</span><br><span class="line">		Class clazz=getClass(object);</span><br><span class="line">		T t = null;</span><br><span class="line">		try &#123;</span><br><span class="line">			Field field=clazz.getField(fieldName);</span><br><span class="line">			t=(T) field.get(object);</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		return t;</span><br><span class="line">	&#125;</span><br><span class="line">	//根据实例化对象、方法名、方法里传入参数class数组、方法里传入参数具体值数组 调用某方法</span><br><span class="line">	public static Object invoke(Object object,String methodName,Class&lt;?&gt;[] parameterTypes,Object[] parameterValue) &#123;</span><br><span class="line">		Class clazz=getClass(object);</span><br><span class="line">		Object obj=null;</span><br><span class="line">		try &#123;</span><br><span class="line">			Method method=clazz.getDeclaredMethod(methodName, parameterTypes);</span><br><span class="line">			method.setAccessible(true);</span><br><span class="line">			obj=method.invoke(object, parameterValue);</span><br><span class="line">		&#125; catch (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			throw new RuntimeException(e);</span><br><span class="line">		&#125;</span><br><span class="line">		return obj;</span><br><span class="line">	&#125;</span><br><span class="line">	//类加载器流获取配置文件对象（Properties）方法：路径必须要使用/分隔</span><br><span class="line">	public Properties getProperties(String path) &#123;</span><br><span class="line">		ClassLoader classLoader=this.getClass().getClassLoader();</span><br><span class="line">		InputStream inputStream=classLoader.getResourceAsStream(path);</span><br><span class="line">		Properties properties=new Properties();</span><br><span class="line">		try &#123;</span><br><span class="line">			properties.load(inputStream);</span><br><span class="line">		&#125; catch (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			throw new RuntimeException(e);</span><br><span class="line">		&#125;</span><br><span class="line">		return properties;</span><br><span class="line">	&#125;</span><br><span class="line">	//文件流获取配置文件对象（Properties）方法:路径必须要使用\\分隔</span><br><span class="line">	public static Properties readProperties(String path) &#123;</span><br><span class="line">		Properties properties=new Properties();</span><br><span class="line">		try &#123;</span><br><span class="line">			FileInputStream fileInputStream=new FileInputStream(path);</span><br><span class="line">			properties.load(fileInputStream);</span><br><span class="line">		&#125; catch (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			throw new RuntimeException(e);</span><br><span class="line">		&#125;</span><br><span class="line">		return properties;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/MrQlyn/MrQlyn.github.io/2019/07/14/java基础/ReflectTool/" data-id="ckib6pxac003v5gtp9hfgfu2p" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java基础/">Java基础</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android/res文件夹及xml资源文件详解" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/14/Android/res文件夹及xml资源文件详解/" class="article-date">
  <time datetime="2019-07-14T02:52:08.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/14/Android/res文件夹及xml资源文件详解/">res文件夹及xml资源文件详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>   <strong>目录</strong></p>
<p> <a href="#%E4%B8%80%E3%80%81values%E6%96%87%E4%BB%B6%EF%BC%9A%E5%AD%98%E6%94%BE%E5%AD%97%E7%AC%A6%E4%B8%B2(strings%EF%BC%89%E3%80%81%E9%A2%9C%E8%89%B2(colors)%E3%80%81%E5%B0%BA%E5%AF%B8(dimens)%E3%80%81%E6%95%B0%E7%BB%84(arrays)%E3%80%81%E6%A0%B7%E5%BC%8F%EF%BC%88styles%E7%B1%BB%E4%BC%BC%E4%BA%8ECSS%E6%96%87%E4%BB%B6%EF%BC%89%E3%80%81%E7%B1%BB%E5%9E%8B%E7%AD%89%E8%B5%84%E6%BA%90">一、values文件：存放字符串(strings）、颜色(colors)、尺寸(dimens)、数组(arrays)、样式（styles类似于CSS文件）、类型等资源</a></p>
<p> <a href="#%E4%BA%8C%E3%80%81drawable%EF%BC%9A%E5%AD%98%E6%94%BE%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%EF%BC%8Cif%E6%9D%A1%E4%BB%B6%E8%AE%BE%E7%BD%AE%E7%9A%84%E9%A2%9C%E8%89%B2%E3%80%81%E5%9B%BE%E7%89%87XML%E6%96%87%E4%BB%B6">二、drawable：存放图片文件，if条件设置的颜色、图片XML文件</a></p>
<p> <a href="#%E4%B8%89%E3%80%81layout%EF%BC%9A%E5%AD%98%E6%94%BE%E5%B8%83%E5%B1%80%E6%96%87%E4%BB%B6%EF%BC%88bmp%E3%80%81png%E3%80%81gif%E3%80%81jpg%EF%BC%89">三、layout：存放布局文件（bmp、png、gif、jpg）</a></p>
<p> <a href="#%E4%B8%80%E3%80%81%E6%8E%A7%E4%BB%B6">1、控件</a></p>
<p> <a href="#Button%3A%E6%8C%89%E9%92%AE%E6%8E%A7%E4%BB%B6">Button:按钮控件</a></p>
<p> <a href="#TextView%3A%E6%96%87%E6%9C%AC%E6%8E%A7%E4%BB%B6%EF%BC%8C%E7%94%A8%E6%9D%A5%E6%98%BE%E7%A4%BA%E6%96%87%E6%9C%AC">TextView:文本控件，用来显示文本</a></p>
<p> <a href="#EditText%3A%E6%96%87%E6%9C%AC%E8%BE%93%E5%85%A5%EF%BC%88%E7%BC%96%E8%BE%91%EF%BC%89%E6%A1%86">EditText:文本输入（编辑）框</a></p>
<p> <a href="#ImageView%3A%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87%E6%8E%A7%E4%BB%B6">ImageView:显示图片控件</a></p>
<p> <a href="#ProgressBar%3A%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E8%BF%9B%E5%BA%A6%E6%9D%A1">ProgressBar:加载数据进度条</a></p>
<p> <a href="#CheckBox%EF%BC%9A%E5%A4%8D%E9%80%89%E6%A1%86">CheckBox：复选框</a></p>
<p> <a href="#RadioGroup">RadioGroup</a></p>
<p> <a href="#RadioButton%EF%BC%9A%E5%8D%95%E9%80%89%E6%A1%86%EF%BC%8C%E4%BF%A9%E4%B8%AA%E6%9D%A1%E4%BB%B6%E8%AE%A9%E5%85%B6%E4%BF%9D%E6%8C%81%E5%8D%95%E9%80%89%E6%95%88%E6%9E%9C%EF%BC%9A1%E3%80%81%E9%9C%80%E8%A6%81%E6%94%BE%E5%9C%A8%E5%90%8C%E4%B8%80RadioGroup%E9%87%8C%E9%9D%A2%C2%A0%202%E3%80%81XML%E6%96%87%E4%BB%B6%E9%87%8C%E8%AE%BE%E7%BD%AEid%E5%B1%9E%E6%80%A7">RadioButton：单选框，俩个条件让其保持单选效果：1、需要放在同一RadioGroup里面 2、XML文件里设置id属性</a></p>
<p> <a href="#Spinner%EF%BC%9A%E4%B8%8B%E6%8B%89%E6%A1%86">Spinner：下拉框</a></p>
<p> <a href="#SeekBar%EF%BC%9A%E8%BF%9B%E5%BA%A6%E6%9D%A1%EF%BC%8CProgressBar%E7%9A%84%E4%BC%98%E5%8C%96%E7%89%88">SeekBar：进度条，ProgressBar的优化版</a></p>
<p> <a href="#SearchView%3A%E6%90%9C%E7%B4%A2%E6%A1%86">SearchView:搜索框</a></p>
<p> <a href="#ProgressDialog%3A%E8%BF%9B%E5%BA%A6%E6%9D%A1%E5%AF%B9%E8%AF%9D%E6%A1%86%C2%A0%20%C2%A0%C2%A0">ProgressDialog:进度条对话框 </a></p>
<p> <a href="#%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89ListView%3A%E5%88%97%E8%A1%A8%E6%8E%A7%E4%BB%B6%2C%E4%B8%8D%E5%90%8C%E4%BA%8E%E4%B8%8A%E9%9D%A2%E5%85%B6%E5%AE%83%E6%8E%A7%E4%BB%B6%EF%BC%8C%E6%A0%BC%E5%BC%8F%E4%B8%BA%3A%3CListView%3E%3C%2FListView%3E">（重点）ListView:列表控件,不同于上面其它控件，格式为:</a></p>
<p> <a href="#%E4%BA%8C%E3%80%81%E5%B8%83%E5%B1%80">2、布局</a></p>
<p> <a href="#%E4%B8%89%E3%80%81XML%E5%BC%95%E5%85%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B8%83%E5%B1%80">3、XML引入自定义布局</a></p>
<p> <a href="#%E5%9B%9B%E3%80%81anim%EF%BC%9A%E5%AD%98%E6%94%BE%E5%8A%A8%E7%94%BB%E6%96%87%E4%BB%B6">四、anim：存放动画文件</a></p>
<p> <a href="#%E4%BA%94%E3%80%81minmap%EF%BC%9A%E5%AD%98%E6%94%BE%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6">五、minmap：存放系统资源文件</a></p>
<p> <a href="#%E5%85%AD%E3%80%81raw%EF%BC%9A%E5%AD%98%E6%94%BE%E4%BB%BB%E6%84%8F%E7%B1%BB%E5%9E%8B%E6%96%87%E4%BB%B6%EF%BC%8C%E4%B8%80%E8%88%AC%E5%AD%98%E6%94%BE%E6%AF%94%E8%BE%83%E5%A4%A7%E7%9A%84%E9%9F%B3%E9%A2%91%E8%A7%86%E9%A2%91%EF%BC%8C%E5%9B%BE%E7%89%87%E6%88%96%E6%96%87%E6%A1%A3%E3%80%82%E4%BC%9A%E5%9C%A8R%E7%B1%BB%E4%B8%AD%E7%94%9F%E6%88%90%E8%B5%84%E6%BA%90id%EF%BC%8C%E5%B0%81%E8%A3%85%E5%9C%A8APK%E4%B8%AD">六、raw：存放任意类型文件，一般存放比较大的音频视频，图片或文档。会在R类中生成资源id，封装在APK中</a></p>
<p> <a href="#%E4%B8%83%E3%80%81assets%EF%BC%9A%E5%AD%98%E6%94%BE%E4%BB%BB%E6%84%8F%E7%B1%BB%E5%9E%8B%E6%96%87%E4%BB%B6%EF%BC%8C%E4%B8%8D%E4%BC%9A%E8%A2%AB%E7%BC%96%E8%AF%91%E3%80%82%E4%B8%8Eraw%E7%9B%B8%E6%AF%94%EF%BC%8C%E4%B8%8D%E4%BC%9A%E5%9C%A8R%E7%B1%BB%E4%B8%AD%E7%94%9F%E6%88%90%E8%B5%84%E6%BA%90id">七、assets：存放任意类型文件，不会被编译。与raw相比，不会在R类中生成资源id</a></p>
<hr>
<h1 id="一、values文件：存放字符串-strings）、颜色-colors-、尺寸-dimens-、数组-arrays-、样式（styles类似于CSS文件）、类型等资源"><a href="#一、values文件：存放字符串-strings）、颜色-colors-、尺寸-dimens-、数组-arrays-、样式（styles类似于CSS文件）、类型等资源" class="headerlink" title="一、values文件：存放字符串(strings）、颜色(colors)、尺寸(dimens)、数组(arrays)、样式（styles类似于CSS文件）、类型等资源"></a>一、values文件：存放字符串(strings）、颜色(colors)、尺寸(dimens)、数组(arrays)、样式（styles类似于CSS文件）、类型等资源</h1><p> 使用示例：</p>
<p> <strong>colors**</strong>文件**</p>
<p> &lt;<strong>resources</strong>&gt;<br> &lt;<strong>color **</strong>name=<strong><strong>“</strong></strong>颜色<strong>**id”</strong>&gt;颜色十六进制数值&lt;/<strong>color</strong>&gt;<br> &lt;/<strong>resources</strong>&gt;</p>
<p> <strong>strings**</strong>文件**</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> &lt;resources&gt;</span><br><span class="line"></span><br><span class="line">    &lt;string name=&quot;字符串id&quot;&gt;字符串值&lt;/string&gt;</span><br><span class="line"></span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure>

<p> <strong>dimens**</strong>文件：设置图片尺寸dp<strong>**和字体尺寸sp</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;resources&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dimen name=&quot;尺寸id&quot;&gt;尺寸值&lt;/dimen&gt;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> &lt;dimen name=&quot;main_tab_h&quot;&gt;80dp&lt;/dimen&gt; 设置图片时用dp</span><br><span class="line"></span><br><span class="line">&lt;dimen name=&quot;main_tab_tsize&quot;&gt;22sp&lt;/dimen&gt; 设置字体大小时用sp</span><br><span class="line"></span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure>



<p> <strong>arrays**</strong>文件**</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"> &lt;resources&gt;</span><br><span class="line"></span><br><span class="line">    &lt;string-array name=&quot;字符串数组id&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;item&gt;字符串1&lt;/item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;item&gt;字符串2&lt;/item&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/string-array&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;integer-array name=&quot;int数组id&quot; translatable=&quot;false&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;item&gt;int值1&lt;/item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;item&gt; int值2&lt;/item&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/integer-array&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;array name=&quot;字符串数组id或int数组id&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;item&gt;字符串1或int值1&lt;/item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;item&gt;字符串2或int值2&lt;/item&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/array&gt;</span><br><span class="line"></span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure>



<p> <strong>styles**</strong>文件**</p>
<p> &lt;<strong>resources</strong>&gt;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">     &lt;style name=&quot;样式id&quot;&gt;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">     &lt;item name=&quot;控件属性&quot;&gt;控件属性值&lt;/item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;item name=&quot;android:layout_width&quot;&gt;wrap_content&lt;/item&gt;</span><br><span class="line"></span><br><span class="line">        &lt;item name=&quot;android:layout_height&quot;&gt;wrap_content&lt;/item&gt;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> &lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure>

<p> 1、在XML文件中使用上述资源（@标签类型/id值）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;Spinner</span><br><span class="line"></span><br><span class="line">    android:id=&quot;@+id/spinner1&quot;</span><br><span class="line"></span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line"></span><br><span class="line">    android:layout_height=&quot;wrap_content&quot;</span><br><span class="line"></span><br><span class="line">    android:entries=&quot;@array/languages&quot;</span><br><span class="line"></span><br><span class="line">    /&gt;</span><br></pre></td></tr></table></figure>

<p> 2、在Java代码里获取资源</p>
<p> color颜色资源</p>
<p> R.color.id值</p>
<p> dimen字体资源</p>
<p> float myDimen = getResources().getDimension(R.dimen.id值);</p>
<p> string字符串资源</p>
<p> <code>Resources.getString()</code> 或 <code>Resources.getText()</code> </p>
<p> array数组资源：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">                     String[] languages= getResources().getStringArray( R.array.languages );</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">                     int[] increase= getResources().getIntArray( R.array.increase );</span><br></pre></td></tr></table></figure>








<h1 id="二、drawable：存放图片文件，if条件设置的颜色、图片XML文件"><a href="#二、drawable：存放图片文件，if条件设置的颜色、图片XML文件" class="headerlink" title="二、drawable：存放图片文件，if条件设置的颜色、图片XML文件"></a>二、drawable：存放图片文件，if条件设置的颜色、图片XML文件</h1><p> Selector标签：只能在drawable里的XML文件使用（即drawable类型的资源文件），一个</p>
<p> XML文件存放一个selector相当于XML文件的if语句， item的状态判断是</p>
<p> 由上而下进行判断的，一旦匹配到该状态，那么之后的状态就不再进行匹配。</p>
 <?xml version="1.0" encoding="utf-8"?>

 <selector xmlns:android="http://schemas.android.com/apk/res/android">

<p> &lt;item</p>
<p> android:color=”@color/id值” //颜色值，#RGB,$ARGB,#RRGGBB,#AARRGGBB</p>
<p> android:drawable=”@drawable/id值” //图片</p>
<p> android:state_pressed=[“true” | “false”]//是否触摸</p>
<p> android:state_focused=[“true” | “false”]//是否获得焦点</p>
<p> android:state_selected=[“true” | “false”]//是否被selected选中状态</p>
<p> android:state_checkable=[“true” | “false”]//是否可选</p>
<p> android:state_checked=[“true” | “false”]//是否被checked选中状态</p>
<p> android:state_enabled=[“true” | “false”]//是否可用</p>
<p> android:state_window_focused=[“true” | “false”] /&gt;//是否窗口聚焦</p>
 </selector>

<p> <select>里的<item>的属性即为判断条件，可多个属性共同组成判断条件，如下：</item></select></p>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">

 <!-- 非触摸模式（有焦点有点击）按下的时候 -->

 <item android:state_focused="true" android:state_pressed="true">

 <!-- 触摸模式（无焦点有点击）按下的时候 -->

 <item android:state_focused="false" android:state_pressed="true">

 </item></item></selector>

<p> 示例：test文件存放了如下<selector></selector></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> &lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item android:color=&quot;@color/colorPrimary&quot;      android:state_checked=&quot;false&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item android:color=&quot;@color/colorAccent&quot;  android:state_checked=&quot;true&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/selector&gt;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">       image_selector文件如下&lt;selector&gt;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> &lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item android:drawable=&quot;@drawable/ic_launcher_background&quot; android:state_pressed=&quot;true&quot;&gt;&lt;/item&gt;</span><br><span class="line"></span><br><span class="line">    &lt;item android:drawable=&quot;@drawable/cardview&quot; android:state_pressed=&quot;false&quot;&gt;&lt;/item&gt;</span><br><span class="line"></span><br><span class="line">&lt;/selector&gt;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure>

<p> 使用：只有XML文件里的属性是设置为颜色、图片的属性才能使用selector文件</p>
<p> 在CheckBox判断是否选中设置颜色<br><strong>android**</strong>:textColor=<strong>**”@drawable/test”</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">       在Button上判断是否点击设置背景图片</span><br><span class="line"></span><br><span class="line">android:background=&quot;@drawable/image_selector&quot;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">       在RadioButton上判断是否选中显示图片</span><br><span class="line"></span><br><span class="line">android:drawableTop=&quot;@drawable/image_selector&quot;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure>






<h1 id="三、layout：存放布局文件（bmp、png、gif、jpg）"><a href="#三、layout：存放布局文件（bmp、png、gif、jpg）" class="headerlink" title="三、layout：存放布局文件（bmp、png、gif、jpg）"></a>三、layout：存放布局文件（bmp、png、gif、jpg）</h1><h2 id="1、控件"><a href="#1、控件" class="headerlink" title="1、控件"></a>1、控件</h2><blockquote>
<p>1、每个控件都有id，长，宽，即在XML代码中都有android：id属性和android：layout_width属性和</p>
<p> android:layout_heigh属性</p>
<p> 定义id：android:id=”@+id/id名”</p>
<p> 引用id：android:od=”@id/id名”</p>
<p> android：layout_width和android:layout_heigh有俩种可选值：match_parent(与父布局大小一致)和</p>
<p> wrap_content(大小刚好包住内容)</p>
<p> 2、控件代码都是&lt;控件名 属性1、属性2、…. /&gt;，属性值都用””包含</p>
<p> 3、所有控件都有android：visibility属性</p>
<p> android:visibility：设置控件显示状态。可选值：visible(可见)，invisible(隐藏仍占用屏幕),gone(消失且不占屏幕)</p>
<p> 后台逻辑操控属性方法：</p>
<p> setVisibility():可传入View.VISIBLE、View.INVISIBLE,View.GONE</p>
<p> 4、 android:gravity:指定文字对齐方式</p>
<p> android:layout_gravity:指定控件在布局对齐方式</p>
<p> android:layout_weight:先按控件尺寸分配屏幕，再按layout_weight比例进行分配</p>
<p> 如：布局有俩个按钮，一个按钮layout_weight属性为1，另一按钮未设置该属性，则</p>
<p> 未设置按钮分配完基本尺寸后，剩余空间都为另一个按钮所占，此时比例为1/1.</p>
<p> 若设置了为1，则俩按钮平分布局空间</p>
<p> android:weightSum:设置layout_weight的总比例值，一般在父布局（即上一层控件）中设置</p>
<p> 5、较常用属性；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  drawableTop、drawableBottom、drawableLeft、drawableRight：在view上边、下边、左边、右边添加一个drawable属性</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  drawablePadding：设置view里drawable的内边距</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  paddingLeft、paddingRight、paddingTop、paddingBottom：设置左右上下的内边距</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  background/src：设置背景图片、</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  checked：是否选中</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  text：设置文本</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  textSize：设置文本字体大小</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  gravity：设置内部文字对齐方式，可选值：center_horizontal、center_vertical、 center、top、bottom、left、right、start、end、clip_horizontal、clip_vertical、fill、fill_horizontal、fill_vertical</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  layout_gravity：设置当前view在上一view的对齐方式，可选值：center_horizontal、center_vertical、 center、top、bottom、left、right、start、end、clip_horizontal、clip_vertical、fill、fill_horizontal、fill_vertical</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  orientation：设置排列方式horizontal水平方向、vertical垂直方向</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  textColor：设置文字颜色，可设置</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  style：设置通用样式属性，引用styles.xml里的&lt;style&gt;里的name属性值,如：@style/name属性值</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
</blockquote>
<h3 id="Button-按钮控件"><a href="#Button-按钮控件" class="headerlink" title="Button:按钮控件"></a>Button:按钮控件</h3><p> XML属性可自行查询文档，这里主要讲后台逻辑部分</p>
<p> 当获取到布局文件中的元素(通过Button,findViewById(R.id.id名))后，按钮的触发事件添加方式有俩钟。</p>
<blockquote>
<p>第一种：单个按钮时使用，直接调用。如：</p>
<p> button.setOnClickListener(new OnClickListener(){</p>
<p> public void onClick(View v){</p>
<p> //添加触发事件逻辑</p>
<p> }</p>
<p> });</p>
<p> 第二种：多个按钮时使用</p>
<p> One：使当前类继承OnClickListener接口（implements OnClickListener）</p>
<p> Two：若有多个按钮，都设置当前类为监听类。button.setOnClickListener(this);</p>
<p> Three:在当前类重写onClick(View v)。</p>
<p> public void onClick(View v){ //View指的是点击按钮,根据不同按钮id不同设置不同触发代码</p>
<p> switch(v.getId()) {<br> case R.id.button1:Toast.makeText(this, “按钮1”, Toast.LENGTH_SHORT).show();break;<br> case R.id.button2:Toast.makeText(this, “按钮2”, Toast.LENGTH_SHORT).show();break;</p>
<p> default:break;</p>
<p> }</p>
<p> }</p>
<p> 第三种：在类里定义一个方法（方法有俩个要求：参数为View类型，和必须为public权限），然后在XML文件</p>
<p> 里android:onClick属性设置为方法名</p>
</blockquote>
<h3 id="Switch：开关按钮"><a href="#Switch：开关按钮" class="headerlink" title="Switch：开关按钮"></a>Switch：开关按钮</h3><p> 属性：</p>
<blockquote>
<p>textOn：控件打开时显示的文字<br> textOff：控件关闭时显示的文字<br> thumb：控件开关的图片<br> track：控件开关的轨迹图片<br> typeface：设置字体类型<br> switchMinWidth：开关最小宽度<br> switchPadding：设置开关 与文字的空白距离<br> switchTextAppearance：设置文本的风格<br> checked：设置初始选中状态<br> splitTrack：是否设置一个间隙，让滑块与底部图片分隔（API 21及以上）<br> showText：设置是否显示开关上的文字（API 21及以上）</p>
<p> 方法；</p>
</blockquote>
<blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  setShowText(boolean):设置是否显示文本</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  setChecked(boolean):设置开关是否打开</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  setText(String):设置显示文本</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  isChecked()：判断是否打开</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;  setOnCheckedChangeListener( new CompoundButton.OnCheckedChangeListener() &#123;</span><br><span class="line">    //Switch控件状态改变监听方法</span><br><span class="line">    @Override</span><br><span class="line">    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) &#123;</span><br><span class="line">        //isChecked为当前Swicth控件的状态</span><br><span class="line">    &#125;</span><br><span class="line">&#125; );</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
</blockquote>
<h3 id="TextView：文本控件，用来显示文本"><a href="#TextView：文本控件，用来显示文本" class="headerlink" title="TextView：文本控件，用来显示文本"></a>TextView：文本控件，用来显示文本</h3><p> 属性:</p>
<blockquote>
<p>android:text:显示文本内容</p>
<p> android:gravity:指定文字对齐方式(top,bttom,left,right,center),可用”|”来指定多个值，如：”center_vertical | </p>
<p> center_horizontal”来表示文字在水平和垂直方向都居中</p>
<p> android:textSize:指定文字大小，单位sp</p>
<p> android:textColor:指定文字颜色，可用16进制数或英文</p>
</blockquote>
<h3 id="EditText-文本输入（编辑）框"><a href="#EditText-文本输入（编辑）框" class="headerlink" title="EditText:文本输入（编辑）框"></a>EditText:文本输入（编辑）框</h3><p> 属性：</p>
<blockquote>
<p>android:hint:设置未输入时显示内容，输入时小时</p>
<p> android:maxLines:设置输入时最大行数，避免内容过多导致控件变形</p>
<p> android:inputType:可设置为textPassword将文本框变为密码框</p>
<p> 方法:</p>
</blockquote>
<blockquote>
<p>getText().toString():获得String形式文本</p>
<p> 如：EditText editText=(EditText)findViewById(R.id.id名);</p>
<p> editText.getText().toString();</p>
</blockquote>
<h3 id="ImageView-显示图片控件"><a href="#ImageView-显示图片控件" class="headerlink" title="ImageView:显示图片控件"></a>ImageView:显示图片控件</h3><p> 属性：</p>
<blockquote>
<p>android:src:设置显示图片，如：android:src=”@drawable/图片名”</p>
<p> scaleType：让图片铺满ImageView</p>
<p> 方法：</p>
</blockquote>
<blockquote>
<p>setImageResource(R.drawable.图片名):设置显示图片</p>
</blockquote>
<h3 id="ProgressBar-加载数据进度条"><a href="#ProgressBar-加载数据进度条" class="headerlink" title="ProgressBar:加载数据进度条"></a>ProgressBar:加载数据进度条</h3><p> 属性:</p>
<blockquote>
<p>（style=”?android:attr/progressBarStyleHorizontal”）：指定成水平进度条</p>
<p> android:max:指定进度条最大值</p>
<p> 后台：</p>
<p> progressBar（进度条类）和progress（进度类）配合使用，如：</p>
<p> progress=progressBar.getProgress();</p>
<p> progress+=10;</p>
<p> progressBar.setProgress(progress);</p>
<p> AlertDialog.Builder:在当前界面弹出警告对话框</p>
<p> 后台：</p>
<p> setTitle(String):设置警告对话框标题</p>
<p> setMessage(String):设置警告对话框信息（内容）</p>
<p> setCancelable(true/false):设置警告对话框是否可取消</p>
<p> //设置确定键</p>
<p> setPositiveButton(String,new DialogInterface.OnClickListen(){</p>
<p> public void onClick(DialogInterface,int which){</p>
<p> }</p>
<p> });</p>
<p> //设置取消键</p>
<p> setNegativeButton(String,new DialogInterface.OnClickListen(){</p>
<p> public void onClick(DialogInterface,int which){</p>
<p> }</p>
<p> });</p>
<p> show():显示警告对话框</p>
</blockquote>
<h3 id="CheckBox：复选框"><a href="#CheckBox：复选框" class="headerlink" title="CheckBox：复选框"></a>CheckBox：复选框</h3><p> 属性</p>
<blockquote>
<p>android:text：设置复选框后的文本</p>
<p> android:checked;设置是否选中</p>
<p> 方法</p>
</blockquote>
<blockquote>
<p>isChecked()：判断选项是否被选中</p>
<p> getText()：获取复选框按钮的文本内容</p>
</blockquote>
<h3 id="RadioGroup"><a href="#RadioGroup" class="headerlink" title="RadioGroup"></a>RadioGroup</h3><p> 方法</p>
<blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;  RadioGroup.getCheckedRadioButtonId ();--获取选中按钮的id</span><br><span class="line">3 RadioGroup.clearCheck ();//---清除选中状态</span><br><span class="line">4 RadioGroup.check (int id);//---通过传入选项id来设置该选项为选中状态，如果传递-1作为指定的选择标识符来清除单选按钮组的勾选状态，相当于调用clearCheck()操作</span><br><span class="line">5 setOnCheckedChangeListener (RadioGroup.OnCheckedChangeListener listener); //--一个当该单选按钮组中的单选按钮勾选状态发生改变时所要调用的回调函数</span><br><span class="line">6 addView (View child, int index, ViewGroup.LayoutParams params);//---使用指定的布局参数添加一个子视图</span><br><span class="line">7 //参数 child 所要添加的子视图    index 将要添加子视图的位置  params 所要添加的子视图的布局参数</span><br><span class="line">8 RadioButton.getText();//获取单选框的值</span><br><span class="line">9 //此外，RadioButton的checked属性设置为true，代码里调用RadioButton的check(id)方法，不会触发onCheckedChanged事件</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</blockquote>
<blockquote>
</blockquote>
<h3 id="RadioButton：单选框，俩个条件让其保持单选效果：1、需要放在同一RadioGroup里面-2、XML文件里设置id属性"><a href="#RadioButton：单选框，俩个条件让其保持单选效果：1、需要放在同一RadioGroup里面-2、XML文件里设置id属性" class="headerlink" title="RadioButton：单选框，俩个条件让其保持单选效果：1、需要放在同一RadioGroup里面 2、XML文件里设置id属性"></a>RadioButton：单选框，俩个条件让其保持单选效果：1、需要放在同一RadioGroup里面 2、XML文件里设置id属性</h3><p> 属性： </p>
<blockquote>
<p>android:text：设置复选框后的文本</p>
<p> android:checked;设置是否选中</p>
<p> 方法</p>
</blockquote>
<blockquote>
<p>isChecked()：判断选项是否被选中</p>
<p> getText()：获取复选框按钮的文本内容</p>
</blockquote>
<h3 id="Spinner：下拉框"><a href="#Spinner：下拉框" class="headerlink" title="Spinner：下拉框"></a>Spinner：下拉框</h3><blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  android:entries：设置下拉框的字符串数组，可引用数组资源如;@array/languages</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</blockquote>
<blockquote>
</blockquote>
<h3 id="SeekBar：进度条，ProgressBar的优化版"><a href="#SeekBar：进度条，ProgressBar的优化版" class="headerlink" title="SeekBar：进度条，ProgressBar的优化版"></a>SeekBar：进度条，ProgressBar的优化版</h3><blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&gt;  seekBar.setOnSeekBarChangeListener( new SeekBar.OnSeekBarChangeListener() &#123;</span><br><span class="line">    //进度条拖动时触发方法</span><br><span class="line">    /*progress参数：进度条当前位置</span><br><span class="line">    fromUser参数：当触发这个函数是由于用户拖拽行为造成的，那么fromUser就为True；</span><br><span class="line">                 如果是因为代码更新SeekBar的位置造成的，那么fromUser为false</span><br><span class="line">                 作用：防止在暂停时，拖动进度条导致进度条自动退至0</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) &#123;</span><br><span class="line">        if(fromUser) &#123;</span><br><span class="line">            //获取拖动后的位置换算视频时长</span><br><span class="line">            int targetPosition = videoView.getDuration() * progress / 100;</span><br><span class="line">            videoView.seekTo( targetPosition );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //进度条按下时触发方法</span><br><span class="line">    @Override</span><br><span class="line">    public void onStartTrackingTouch(SeekBar seekBar) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    //进度条松开时触发方法</span><br><span class="line">    @Override</span><br><span class="line">    public void onStopTrackingTouch(SeekBar seekBar) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125; );</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</blockquote>
<blockquote>
</blockquote>
<h3 id="SearchView-搜索框"><a href="#SearchView-搜索框" class="headerlink" title="SearchView:搜索框"></a>SearchView:搜索框</h3><p> 属性</p>
<blockquote>
<p>输入类型<br> android:inputType</p>
<p> 最大宽度<br> android:maxWidth</p>
<p> 搜索图标是否显示在搜索框内：默认为true<br> mSearchView.setIconifiedByDefault(true);</p>
<p> 搜索图标是否显示在搜索框内<br> mSearchView.setIconifiedByDefault(true);</p>
<p> 设置搜索框展开时是否显示提交按钮，可不显示<br> mSearchView.setSubmitButtonEnabled(true);</p>
<p> 让键盘的回车键设置成搜索<br> mSearchView.setImeOptions(EditorInfo.IME_ACTION_SEARCH);</p>
<p> 搜索框是否展开，false表示展开<br> mSearchView.setIconified(false);</p>
<p> 获取焦点<br> mSearchView.setFocusable(true);<br> mSearchView.requestFocusFromTouch();</p>
<p> 设置提示词<br> mSearchView.setQueryHint(“请输入关键字”);</p>
<p> 设置输入框文字颜色<br> EditText editText = (EditText) mSearchView.findViewById(android.support.v7.appcompat.R.id.search_src_text);<br> editText.setHintTextColor(ContextCompat.getColor(this, R.color.white));<br> editText.setTextColor(ContextCompat.getColor(this, R.color.white));</p>
<p> 方法</p>
</blockquote>
<blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;  //设置搜索框触发方法</span><br><span class="line">SearchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() &#123;</span><br><span class="line">    //提交时触发方法,s为搜索框的数据</span><br><span class="line">    @Override</span><br><span class="line">    public boolean onQueryTextSubmit(String s) &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    //内容改变触发方法</span><br><span class="line">    @Override</span><br><span class="line">    public boolean onQueryTextChange(String s) &#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</blockquote>
<blockquote>
</blockquote>
<h3 id="ProgressDialog-进度条对话框"><a href="#ProgressDialog-进度条对话框" class="headerlink" title="ProgressDialog:进度条对话框"></a>ProgressDialog:进度条对话框</h3><p> 后台： </p>
<blockquote>
<p>setTitle(String):设置进度条对话框标题</p>
<p> setMessage(String):设置进度条对话框信息（内容）</p>
<p> setCancelable(true/false):设置进度条对话框是否可取消</p>
<p> show():显示进度条对话框</p>
<p> dimiss():关闭对话框</p>
</blockquote>
<h3 id="（重点）ListView-列表控件-不同于上面其它控件，格式为"><a href="#（重点）ListView-列表控件-不同于上面其它控件，格式为" class="headerlink" title="（重点）ListView:列表控件,不同于上面其它控件，格式为:"></a><strong>（重点）ListView:列表控件,不同于上面其它控件，格式为:<listview></listview></strong></h3><blockquote>
<p>** Part One后台**：用到ListView类和适配器类(这里选用数组适配器类ArrayAdapter&lt;列表子项类型&gt;)</p>
<p> ListView后台代码：</p>
<p> setAdapter():传入设置的适配器</p>
<p> setOnItemClickListener(new OnItemClickListener(){</p>
<p> public void onItemClick(AdapterView&lt;?&gt; parent,int position, longid){</p>
<p> //点击子项触发事件代码….此处position为子项索引值，可用ArrayAdapter类型的适配器类的get(position)方法</p>
<p> //从子项数组取出子项类</p>
<p> }</p>
<p> });</p>
<p> ArrayAdapter&lt;列表子项类型&gt;后台代码：</p>
<p> ArrayAdapter&lt;列表子项类型&gt;(当前活动.this,列表子项布局id,列表子项数组):构造一个适配器，若此时id为</p>
<p> android.R.layout.simple_list_item_1,此时子项布局为内置布局文件，只有一个</p>
<p> TextView，子项数组应为String类型与之对应</p>
<p> ** Part Two自定义子项步骤：**</p>
<p> 1、自定义子项布局文件，在构建适配器时传入布局id</p>
<p> 2、自定义子项类（包含对应的类型变量，如 TextView对应定义String变量，图片对应int变量），同时重写子项类构造</p>
<p> 函数和对应变量的返回函数</p>
<p> 3、自定义适配器类（包含子项布局ID变量resourceId，因为后面要用）继承于ArrayAdapter&lt;自定义子项类&gt;</p>
<p> 重写构造方法：super(当前活动.this,列表子项布局id,列表子项数组)</p>
<p> resourceId=列表子项布局id;</p>
<p> 重写public View getView(int position,View cachView,ViewGroup parent):当列表滚动至屏幕包含子项调用的方法</p>
<p> Fruit fruit=getItem(position); //获得滚动进屏幕的子项类</p>
<p> View view;</p>
<p> if(cachView==null){ //缓存视图为空</p>
<p> view=LayoutInflater.from(getContext()).inflate(resourceId,null); //获得子项布局View</p>
<p> } else{</p>
<p> view=cachView;</p>
<p> } </p>
<p> //接下来就是给布局文件里的具体控件加载资源</p>
<p> //如：TextView textView=findViewById(R.id.控件id名);</p>
<p> // textView.setText(fruit.getText());…. </p>
<p> return view; //最后返回子项布局view</p>
<p> }</p>
</blockquote>
<h2 id="2、布局"><a href="#2、布局" class="headerlink" title="2、布局"></a>2、布局</h2><blockquote>
<p>LinearLayout：线性布局</p>
<p> RelativeLayout:相对布局（推荐使用，可随意放置控件布置）</p>
<p> TableLayout:表格布局</p>
<p> FrameLayout:少用</p>
</blockquote>
<h2 id="3、XML引入自定义布局"><a href="#3、XML引入自定义布局" class="headerlink" title="3、XML引入自定义布局"></a>3、XML引入自定义布局</h2><blockquote>
<p>&lt;#include layout=”@layout/布局文件名”&gt;</p>
</blockquote>
<h1 id="四、anim：存放动画文件"><a href="#四、anim：存放动画文件" class="headerlink" title="四、anim：存放动画文件"></a>四、anim：存放动画文件</h1><h1 id="五、minmap：存放系统资源文件"><a href="#五、minmap：存放系统资源文件" class="headerlink" title="五、minmap：存放系统资源文件"></a>五、minmap：存放系统资源文件</h1><h1 id="六、raw：存放任意类型文件，一般存放比较大的音频视频，图片或文档。会在R类中生成资源id，封装在APK中"><a href="#六、raw：存放任意类型文件，一般存放比较大的音频视频，图片或文档。会在R类中生成资源id，封装在APK中" class="headerlink" title="六、raw：存放任意类型文件，一般存放比较大的音频视频，图片或文档。会在R类中生成资源id，封装在APK中"></a>六、raw：存放任意类型文件，一般存放比较大的音频视频，图片或文档。会在R类中生成资源id，封装在APK中</h1><h1 id="七、assets：存放任意类型文件，不会被编译。与raw相比，不会在R类中生成资源id"><a href="#七、assets：存放任意类型文件，不会被编译。与raw相比，不会在R类中生成资源id" class="headerlink" title="七、assets：存放任意类型文件，不会被编译。与raw相比，不会在R类中生成资源id"></a>七、assets：存放任意类型文件，不会被编译。与raw相比，不会在R类中生成资源id</h1><p> 1、可能是SDKTools工具版本与build.gradle文件里的版本号不一致</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">File-Settings-Appearance &amp; Behavior-&gt;System.Settigs-&gt;Android SDK-&gt;Android SDK Tools的版本号与gradle文件里的compileSdkVersion</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">、targetSdkVersion版本号不一致，</span><br></pre></td></tr></table></figure>



      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/MrQlyn/MrQlyn.github.io/2019/07/14/Android/res文件夹及xml资源文件详解/" data-id="ckib6pxea008l5gtpg3m3fl8m" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android/SQLite" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/14/Android/SQLite/" class="article-date">
  <time datetime="2019-07-14T02:51:25.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/14/Android/SQLite/">SQLite</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
           <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"> package com.example.sqltest;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import android.content.Context;</span><br><span class="line">import android.database.Cursor;</span><br><span class="line">import android.database.sqlite.SQLiteDatabase;</span><br><span class="line">import android.database.sqlite.SQLiteDatabase.CursorFactory;</span><br><span class="line">import android.database.sqlite.SQLiteOpenHelper;</span><br><span class="line">import android.widget.Toast;</span><br><span class="line">public class MyDataBaseHelper extends SQLiteOpenHelper&#123;</span><br><span class="line">	private Context myContext;	//构造函数里的Context</span><br><span class="line">	private SQLiteDatabase mydb;</span><br><span class="line">	/*</span><br><span class="line">	 * SQLite关系数据库里的SQL语句：</span><br><span class="line">	 * 整形：integer</span><br><span class="line">	 * 浮点型：real</span><br><span class="line">	 * 文本型：text</span><br><span class="line">	 * 二进制型：blob</span><br><span class="line">	 * SQLiteOpenHelper的getReadableDatabase()方法调用后才会执行onCreate()或onUpgrade()，而</span><br><span class="line">	 * 不是构建时候调用</span><br><span class="line">	 */</span><br><span class="line">	//创建语句一般预设为public且static，外部通过类名可直接修改调用（便于数据库修改）</span><br><span class="line">	public static String createBook=&quot;create table Book(id integer primary key autoincrement,&quot;</span><br><span class="line">			+ &quot;author text,price real,pages integer,name text)&quot;;</span><br><span class="line">	public static String createBookBuyer=&quot;create table BookBuyer(name text,age integer)&quot;;</span><br><span class="line">	public MyDataBaseHelper(Context context, String name, CursorFactory factory, int version) &#123;</span><br><span class="line">		//name为数据库名字，version为创建或打开的数据库版本号（极其重要），当传入版本号高于已存在</span><br><span class="line">		//版本号时，会自动调用onUpgrade()方法而不是onCreate()方法</span><br><span class="line">		super(context, name, factory, version);</span><br><span class="line">		myContext=context;</span><br><span class="line">	&#125;</span><br><span class="line">	//第一次安装程序创建数据库时调用onCreate()方法</span><br><span class="line">	@Override</span><br><span class="line">	public void onCreate(SQLiteDatabase db) &#123;</span><br><span class="line">		/**</span><br><span class="line">		          * 这个方法</span><br><span class="line">		          * 1、在第一次打开数据库的时候才会走</span><br><span class="line">		          * 2、在清除数据之后再次运行--&gt;打开数据库，这个方法会走</span><br><span class="line">		          * 3、没有清除数据，不会走这个方法</span><br><span class="line">		          * 4、数据库升级的时候这个方法不会走</span><br><span class="line">		*/</span><br><span class="line">		db.execSQL(createBook);</span><br><span class="line">		//db.execSQL(createBookBuyer);</span><br><span class="line">		mydb=this.getReadableDatabase();</span><br><span class="line">		Toast.makeText(myContext, &quot;Successful Create!!&quot;,Toast.LENGTH_LONG).show();</span><br><span class="line">	&#125;</span><br><span class="line">	//升级数据库时调用onUpgrade()方法，一般在数据库增添表，修改表结构等升级操作使用</span><br><span class="line">	@Override</span><br><span class="line">	public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) &#123;</span><br><span class="line">		/**</span><br><span class="line">	          * 1、第一次创建数据库的时候，这个方法不会走</span><br><span class="line">	          * 2、清除数据后再次运行(相当于第一次创建)这个方法不会走</span><br><span class="line">	          * 3、数据库已经存在，而且版本升高的时候，这个方法才会调用</span><br><span class="line">		*/</span><br><span class="line">		//若此时数据库旧版本号（即已传入版本）为1，2版本增加了createBookBuyer此时会调用onUpgrade()</span><br><span class="line">		//switch对旧版本号进行判断，依次升级数据库版本，不加break可升到最高级</span><br><span class="line">		switch(oldVersion) &#123;</span><br><span class="line">		case 1:db.execSQL(createBookBuyer);</span><br><span class="line">		//如第二次版本若要修改已有Book表结构，应修改createBook的sql语句保证首次创建数据库准确</span><br><span class="line">		//然后再修改onUpgrade()里的switch语句添加新的列</span><br><span class="line">		//case 2:db.execSQL(&quot;alert table Book add column cost integer&quot;);</span><br><span class="line">		mydb=this.getReadableDatabase();</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	public void insert_delete_update(String sql,String[] str) &#123;</span><br><span class="line">		mydb=this.getReadableDatabase();</span><br><span class="line">		startAffair();</span><br><span class="line">		mydb.execSQL(sql,str);</span><br><span class="line">		affairSuccessful();</span><br><span class="line">		endAffair();</span><br><span class="line">	&#125;</span><br><span class="line">	//查询函数的sql语句允许使用?表示未知参数，未知参数在obj数组里依次给出</span><br><span class="line">	//也可以使用完整sql语句，第二个参数设为空即可</span><br><span class="line">	public List&lt;Book&gt; select(String sql,String[] obj) &#123;</span><br><span class="line">		mydb=this.getReadableDatabase();</span><br><span class="line">		startAffair();</span><br><span class="line">		ArrayList&lt;Book&gt; result=new ArrayList&lt;Book&gt;();</span><br><span class="line">		Cursor cursor=mydb.rawQuery(sql,obj);</span><br><span class="line">		if(cursor.moveToFirst()) &#123;//如果移动到数据表第一行不为空</span><br><span class="line">			do &#123;</span><br><span class="line">				    Book tableClass=new Book();</span><br><span class="line">					tableClass.setId(cursor.getInt(cursor.getColumnIndex(&quot;id&quot;)));</span><br><span class="line">					tableClass.setPages(cursor.getInt(cursor.getColumnIndex(&quot;pages&quot;)));</span><br><span class="line">					tableClass.setAuthor(cursor.getString(cursor.getColumnIndex(&quot;author&quot;)));</span><br><span class="line">					tableClass.setName(cursor.getString(cursor.getColumnIndex(&quot;name&quot;)));</span><br><span class="line">					tableClass.setPrice(cursor.getDouble(cursor.getColumnIndex(&quot;price&quot;)));</span><br><span class="line">					result.add(tableClass);</span><br><span class="line">			&#125;while(cursor.moveToNext());</span><br><span class="line">		&#125;</span><br><span class="line">		cursor.close();</span><br><span class="line">		affairSuccessful();</span><br><span class="line">		endAffair();</span><br><span class="line">		return result;</span><br><span class="line">	&#125;</span><br><span class="line">	//开始事务</span><br><span class="line">	public void startAffair() &#123;</span><br><span class="line">		mydb.beginTransaction();</span><br><span class="line">	&#125;</span><br><span class="line">	//事务成功（设置成功会在结束事务时提交事务，否则就会回滚事务）</span><br><span class="line">	public void affairSuccessful() &#123;</span><br><span class="line">		mydb.setTransactionSuccessful();</span><br><span class="line">	&#125;</span><br><span class="line">	//结束事务</span><br><span class="line">	public void endAffair() &#123;</span><br><span class="line">		mydb.endTransaction();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/MrQlyn/MrQlyn.github.io/2019/07/14/Android/SQLite/" data-id="ckib6px8z00255gtpw2q15paa" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android/Android里的网络以及XML，JSON文件的解析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/14/Android/Android里的网络以及XML，JSON文件的解析/" class="article-date">
  <time datetime="2019-07-14T02:51:10.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/14/Android/Android里的网络以及XML，JSON文件的解析/">Android里的网络以及XML，JSON文件的解析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>   涉及到Android里的网络编程都需要添加权限</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p> 一、WebView：是应用程序打开web网页的UI控件</p>
<p> 前台：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;</span><br><span class="line">    android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;</span><br><span class="line">    android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;</span><br><span class="line">    android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;</span><br><span class="line">    tools:context=&quot;com.example.webtest.WebViewActivity&quot; &gt;</span><br><span class="line"></span><br><span class="line">    &lt;WebView</span><br><span class="line">        android:id=&quot;@+id/webView&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure>

<p> 后端： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> public class WebViewActivity extends Activity &#123;</span><br><span class="line">	private WebView webView;</span><br><span class="line">	@Override</span><br><span class="line">	protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">		super.onCreate(savedInstanceState);</span><br><span class="line">		setContentView(R.layout.webview);</span><br><span class="line">		webView=(WebView)findViewById(R.id.webView);</span><br><span class="line">		//getSettings()：设置浏览器一些属性</span><br><span class="line">		//setJavaScriptEnabled():设置WebView支持javascript脚本</span><br><span class="line">		webView.getSettings().setJavaScriptEnabled(true);</span><br><span class="line">		//setWebViewClient(new WebViewClient()):让从一个网页跳转到另一个网页时仍在当前WebView显示</span><br><span class="line">		webView.setWebViewClient(new WebViewClient());</span><br><span class="line">		//loadUrl(String):设置打开的网址</span><br><span class="line">		webView.loadUrl(&quot;http://www.baidu.com&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 二、Http协议：客户端提交数据给服务端和从服务端获得数据，像WebView也是向百度的服务端发出一条Http请求，服务端返回HTML页面，客户端（浏览器）解析后展示出页面。</p>
<p> 提交数据和获得数据的方式有很多，这里介绍一种，使用HttpURLConnection来向服务器提交数据或者获得数据。</p>
<p> 获得数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">	//传入网址，获得请求网页数据（XML文件数据或JSON文件数据）</span><br><span class="line">public static String sendHttpRequest(String address) &#123;</span><br><span class="line">	HttpURLConnection connection=null;</span><br><span class="line">	try &#123;</span><br><span class="line">		URL url=new URL(address);</span><br><span class="line">		connection=(HttpURLConnection)url.openConnection();</span><br><span class="line">		//设置请求方式：GET为从服务器获得数据，POST为提交数据</span><br><span class="line">		connection.setRequestMethod(&quot;GET&quot;);</span><br><span class="line">		//设置连接最长超时时间(单位毫秒)</span><br><span class="line">		connection.setConnectTimeout(8000);</span><br><span class="line">		//设置读取最长超时时间(单位毫秒)</span><br><span class="line">		connection.setReadTimeout(8000);</span><br><span class="line">		connection.setDoInput(true);</span><br><span class="line">		connection.setDoOutput(true);</span><br><span class="line">		//获取到的数据输入流（InputStream为抽象类）</span><br><span class="line">		InputStream in=connection.getInputStream();</span><br><span class="line">		//对输入流进行读取</span><br><span class="line">		BufferedReader reader=new BufferedReader(new InputStreamReader(in));</span><br><span class="line">		StringBuffer response = new StringBuffer();</span><br><span class="line">		String line;</span><br><span class="line">		while((line=reader.readLine()) != null) &#123;</span><br><span class="line">			response.append(line);</span><br><span class="line">		&#125;</span><br><span class="line">		return response.toString();</span><br><span class="line">		</span><br><span class="line">	&#125; catch (Exception e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		return e.getMessage();</span><br><span class="line">	&#125;finally &#123;</span><br><span class="line">		if(connection!=null) &#123;</span><br><span class="line">			connection.disconnect();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 提交数据： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">	public static void submit(String address) &#123;</span><br><span class="line">	HttpURLConnection connection=null;</span><br><span class="line">	try &#123;</span><br><span class="line">		//设置为提交模式</span><br><span class="line">		connection.setRequestMethod(&quot;POST&quot;);</span><br><span class="line">		DataOutputStream out=new DataOutputStream(connection.getOutputStream());</span><br><span class="line">		out.writeBytes(&quot;username=admin&amp;password=123456&quot;);//数据与数据之间用&amp;分割</span><br><span class="line">	&#125;catch (Exception e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;finally &#123;</span><br><span class="line">		if(connection!=null) &#123;</span><br><span class="line">			connection.disconnect();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 三、解析获得的网页数据（XML文件或JSON文件）</p>
<p> 1、解析XML：使用Pull方式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">需要导入jar包：xmlpull-xpp3-1.1.4c.jar</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">	//Pull解析XML文件</span><br><span class="line">private void parseXMLWithPull(String xml_data) &#123;</span><br><span class="line">       try &#123;</span><br><span class="line">           XmlPullParserFactory factory = XmlPullParserFactory.newInstance();</span><br><span class="line">           XmlPullParser xmlPullParser = factory.newPullParser();</span><br><span class="line">           xmlPullParser.setInput(new StringReader(xml_data));</span><br><span class="line">           int eventType=xmlPullParser.getEventType();</span><br><span class="line">           String id = &quot;&quot;;</span><br><span class="line">           String name = &quot;&quot;;</span><br><span class="line">           String version = &quot;&quot;;</span><br><span class="line">           while (XmlPullParser.END_DOCUMENT != eventType) &#123;</span><br><span class="line">               String nodeName = xmlPullParser.getName();</span><br><span class="line">               switch (eventType) &#123;</span><br><span class="line">               	//解析时的判断逻辑</span><br><span class="line">                   case XmlPullParser.START_TAG:</span><br><span class="line">                       if (&quot;id&quot;.equals(nodeName)) &#123;</span><br><span class="line">                           id = xmlPullParser.nextText();</span><br><span class="line">                       &#125; else if (&quot;name&quot;.equals(nodeName)) &#123;</span><br><span class="line">                           name = xmlPullParser.nextText();</span><br><span class="line">                       &#125; else if (&quot;version&quot;.equals(nodeName)) &#123;</span><br><span class="line">                           version = xmlPullParser.nextText();</span><br><span class="line">                       &#125;</span><br><span class="line">                       break;</span><br><span class="line">                   //完成解析某个结点</span><br><span class="line">                   case XmlPullParser.END_TAG:</span><br><span class="line">                       if (&quot;app&quot;.equals(nodeName)) &#123;</span><br><span class="line">                           Log.d(&quot;id is &quot;,id);</span><br><span class="line">                           Log.d(&quot; name is &quot;,name);</span><br><span class="line">                           Log.d(&quot; version is &quot;,version);</span><br><span class="line">                       &#125;</span><br><span class="line">                       break;</span><br><span class="line">                   default:</span><br><span class="line">                       break;</span><br><span class="line">               &#125;</span><br><span class="line">               eventType = xmlPullParser.next();</span><br><span class="line">           &#125;</span><br><span class="line">       &#125; catch (Exception e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 2、解析JSON有俩种方式：JSONObject和GSON </p>
<p> JSONObject：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">	//JSONObject解析JSON文件</span><br><span class="line">private void parseJSONWithJSONObject(String json_data) &#123;</span><br><span class="line">	try &#123;</span><br><span class="line">		JSONArray jsonArray=new JSONArray(json_data);</span><br><span class="line">		for(int i=0;i&lt;jsonArray.length();i++) &#123;</span><br><span class="line">			JSONObject jsonObject=jsonArray.getJSONObject(i);</span><br><span class="line">			String id=jsonObject.getString(&quot;id&quot;);</span><br><span class="line">			String name=jsonObject.getString(&quot;name&quot;);</span><br><span class="line">			String version=jsonObject.getString(&quot;version&quot;);</span><br><span class="line">			Log.d(&quot;MainActivity&quot;, &quot;id is&quot;+id);</span><br><span class="line">			Log.d(&quot;MainActivity&quot;, &quot;name is&quot;+name);</span><br><span class="line">			Log.d(&quot;MainActivity&quot;, &quot;version is&quot;+version);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;catch(Exception e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> GSON ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">需要导入jar包：gson-2.0.jar，log4j-1.2.17.jar，slf4j-api-1.7.10.jar，slf4j-log4j12-1.7.10.jar</span><br></pre></td></tr></table></figure>

<p> 还需要自定义与JSON文件相对应的对象 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"> class App&#123;</span><br><span class="line">	private String id;</span><br><span class="line">	private String name;</span><br><span class="line">	private String version;</span><br><span class="line">	public String getId() &#123;</span><br><span class="line">		return id;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setId(String id) &#123;</span><br><span class="line">		this.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getName() &#123;</span><br><span class="line">		return name;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setName(String name) &#123;</span><br><span class="line">		this.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getVersion() &#123;</span><br><span class="line">		return version;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setVersion(String version) &#123;</span><br><span class="line">		this.version = version;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 最后对传入JSON数据（String形式）进行解析</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">	//GSON解析JSON文件方法</span><br><span class="line">private void parseJSONWithGSON(String json_data) &#123;</span><br><span class="line">	Gson gson=new Gson();</span><br><span class="line">	List&lt;App&gt; appList=gson.fromJson(json_data, new TypeToken&lt;List&lt;App&gt;&gt;() &#123;&#125;.getType());</span><br><span class="line">	for(App app:appList) &#123;</span><br><span class="line">		Log.d(&quot;MainActivity&quot;, &quot;id is&quot;+app.getId());</span><br><span class="line">		Log.d(&quot;MainActivity&quot;, &quot;name is&quot;+app.getName());</span><br><span class="line">		Log.d(&quot;MainActivity&quot;, &quot;version is&quot;+app.getVersion());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/MrQlyn/MrQlyn.github.io/2019/07/14/Android/Android里的网络以及XML，JSON文件的解析/" data-id="ckib6px8w00215gtpcry2q1lw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android/Android框架之OKHttpUtils" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/14/Android/Android框架之OKHttpUtils/" class="article-date">
  <time datetime="2019-07-14T02:50:21.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/14/Android/Android框架之OKHttpUtils/">Android框架之OKHttpUtils</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>  OKHttpUtils是对OKHttp的一个封装类，OKHttp有很多功能：如文件上传、下载；文本数据的请求get和提交post；下载图片等</p>
<p> 需要导入三个jar包：okhttp-3.4.1.jar、okhttputils-2_6_2.jar、okio-1.9.0.jar，我已经收集出来，下面是下载地址</p>
<p> 百度云盘地址：<a href="https://pan.baidu.com/s/1O6kBWu0PNGGtWcbwLwWLmg" target="_blank" rel="noopener">https://pan.baidu.com/s/1O6kBWu0PNGGtWcbwLwWLmg</a></p>
<p> 密码：cugv</p>
<blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  回调类：okhttpUtils是获取http服务器连接前后，会调用类里的各种方法</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;  AbsCallback: 所有回调的父类，抽象类</span><br><span class="line"></span><br><span class="line">StringCallBack：如果返回值类型是纯文本数据，即可使用该回调</span><br><span class="line">BitmapCallback：如果请求的是图片数据，则可以使用该回调</span><br><span class="line">FileCallBack：如果要做文件下载，则必须使用该回调，内部封装了关于文件下载进度回调的方法</span><br><span class="line"></span><br><span class="line">1，CallBackString类的onResponse方法中返回值是String类型。</span><br><span class="line">2，CallBackBitmap类的onResponse方法中返回值是Bitmap类型。</span><br><span class="line">3，CallBackFile类的onResponse方法中返回值是File类型。</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p> 回调类有以下方法（可以重写回调类里的方法，实现文件下载前的动画演示，文件下载进度等等设置）：</p>
</blockquote>
<p> 以StringCallback为例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">class MyStringCallback extends StringCallback &#123;</span><br><span class="line">       //与服务器连接错误调用方法</span><br><span class="line">       @Override</span><br><span class="line">       public void onError(Call call, Exception e, int i) &#123;</span><br><span class="line">           Toast.makeText(OkhttpUtilsActivity.this,e.getMessage(),Toast.LENGTH_LONG).show();</span><br><span class="line">       &#125;</span><br><span class="line">       //连接成功，服务器返回数据方法，s为获得的数据</span><br><span class="line">       @Override</span><br><span class="line">       public void onResponse(String s, int i) &#123;</span><br><span class="line">           //textView.setText(&quot;请求返回值:&quot;+s);</span><br><span class="line">       &#125;</span><br><span class="line">       //返回进度的方法</span><br><span class="line">       @Override</span><br><span class="line">       public void inProgress(float progress, long total, int id) &#123;</span><br><span class="line">           // super.inProgress(progress, total, id);</span><br><span class="line">           System.out.println(&quot;进度&quot;+100 * progress);</span><br><span class="line">       &#125;</span><br><span class="line">       //与服务器连接之后调用方法（不管get或post是否成功都会调用该方法）</span><br><span class="line">       @Override</span><br><span class="line">       public void onAfter(int id) &#123;</span><br><span class="line">           //super.onAfter(id);</span><br><span class="line">           Toast.makeText(OkhttpUtilsActivity.this,&quot;服务器连接完成&quot;,Toast.LENGTH_LONG).show();</span><br><span class="line">       &#125;</span><br><span class="line">       //与服务器连接之前调用方法</span><br><span class="line">       @Override</span><br><span class="line">       public void onBefore(Request request, int id) &#123;</span><br><span class="line">           //super.onBefore(request, id);</span><br><span class="line">           Toast.makeText(OkhttpUtilsActivity.this,&quot;开始连接服务器&quot;,Toast.LENGTH_SHORT).show();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p> 上面是获取OkhttpUtils设置获取http连接前后回调类的方法，下面才是真正使用OKhttpUtils的方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> //get请求文本</span><br><span class="line">public void getHttpText() throws Exception &#123;</span><br><span class="line">    OkHttpUtils</span><br><span class="line">            .get()</span><br><span class="line">            .url(&quot;http://www.baidu.com&quot;)</span><br><span class="line">            .addParams(&quot;username&quot;, &quot;heyman&quot;)</span><br><span class="line">            .addParams(&quot;password&quot;, &quot;123&quot;)</span><br><span class="line">            .id(20)</span><br><span class="line">            .build()</span><br><span class="line">            .execute(new MyStringCallback());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//post提交文本</span><br><span class="line">public void postHttpText()&#123;</span><br><span class="line">    String url = &quot;http://www.baidu.com&quot;;</span><br><span class="line">    OkHttpUtils</span><br><span class="line">            .post()</span><br><span class="line">            .url(url)</span><br><span class="line">            .id(100)</span><br><span class="line">            .build()</span><br><span class="line">            .execute(new MyStringCallback());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> //下载文件</span><br><span class="line">public void downloadFile()&#123;</span><br><span class="line">    OkHttpUtils//</span><br><span class="line">            .get()//</span><br><span class="line">            .url(&quot;http://vfx.mtime.cn/Video/2016/07/24/mp4/160724055620533327_480.mp4&quot;)//</span><br><span class="line">            .build()//</span><br><span class="line">            .execute(new FileCallBack(Environment.getExternalStorageDirectory().getAbsolutePath(),&quot;MyMusic.mp4&quot;)&#123;</span><br><span class="line">                @Override</span><br><span class="line">                public void onError(Call call, Exception e, int i) &#123;</span><br><span class="line">                &#125;</span><br><span class="line">                @Override</span><br><span class="line">                public void onResponse(File file, int i) &#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                @Override</span><br><span class="line">                public void inProgress(float progress, long total, int id) &#123;</span><br><span class="line">                    super.inProgress(progress, total, id);</span><br><span class="line">                    progressBar.setProgress((int) (100 * progress));</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 上传文件还需要一个已经编写好的Servlet的war文件来做测试，将他放入tomcat服务器的webapps目录下，启动tomcat服务器</p>
<p> 在这给出百度云盘链接：<a href="https://pan.baidu.com/s/1fzSLh7yMSq5ypoWVsTylSg" target="_blank" rel="noopener">https://pan.baidu.com/s/1fzSLh7yMSq5ypoWVsTylSg</a></p>
<p> 云盘链接密码：6v0z</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> //上传多个或者单个文件</span><br><span class="line">public void uploadFile()&#123;</span><br><span class="line">    //192.168.1.104为本机IP地址</span><br><span class="line">    //由于端口冲突：http://192.168.1.104:8080为tomcat地址</span><br><span class="line">    //http://192.168.1.104为apache地址</span><br><span class="line">    String url = &quot;http://192.168.1.104:8080/FileUpload/FileUploadServlet&quot;;</span><br><span class="line">    File fileOne = new File(Environment.getExternalStorageDirectory(), &quot;tiao.mp4&quot;);</span><br><span class="line">    File fileTWo = new File(Environment.getExternalStorageDirectory(), &quot;shumei.txt&quot;);</span><br><span class="line">    if (!fileOne.exists() || !fileTWo.exists()) &#123;</span><br><span class="line">        Toast.makeText(OkhttpUtilsActivity.this, &quot;文件不存在，请修改文件路径&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    Map&lt;String, String&gt; paramsMap= new HashMap&lt;&gt;();</span><br><span class="line">    //填写用户名与密码，有的服务器需要</span><br><span class="line">    paramsMap.put(&quot;username&quot;, &quot;name&quot;);</span><br><span class="line">    paramsMap.put(&quot;password&quot;, &quot;123&quot;);</span><br><span class="line"></span><br><span class="line">    OkHttpUtils.post()</span><br><span class="line">            .addFile(&quot;mFile&quot;, &quot;server_afu.mp4&quot;, fileOne)</span><br><span class="line">            .addFile(&quot;mFile&quot;, &quot;server_test.txt&quot;, fileTWo)</span><br><span class="line">            .url(url)</span><br><span class="line">            .params(paramsMap)</span><br><span class="line">            .build()</span><br><span class="line">            .execute(new MyStringCallback());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> //获取图片</span><br><span class="line">public void getPicture()</span><br><span class="line">&#123;</span><br><span class="line">    String url = &quot;http://images.csdn.net/20150817/1.jpg&quot;;</span><br><span class="line">    String url2=&quot;http://pics.sc.chinaz.com/files/pic/pic9/201807/bpic7704.jpg&quot;;</span><br><span class="line">    OkHttpUtils</span><br><span class="line">            .get()</span><br><span class="line">            .url(url2)</span><br><span class="line">            .tag(this)</span><br><span class="line">            .build()</span><br><span class="line">            .connTimeOut(20000)</span><br><span class="line">            .readTimeOut(20000)</span><br><span class="line">            .writeTimeOut(20000)</span><br><span class="line">            .execute(new BitmapCallback() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public void onError(Call call, Exception e, int id) &#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                @Override</span><br><span class="line">                public void onResponse(Bitmap bitmap, int id) &#123;</span><br><span class="line">                    Log.e(&quot;TAG&quot;, &quot;onResponse：complete&quot;);</span><br><span class="line">                    imageView.setImageBitmap(bitmap);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> //使用okhttp-utils上传多个或者单个文件（带参数）：</span><br><span class="line">public void multiFileUpload()</span><br><span class="line">&#123;</span><br><span class="line">    HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;();</span><br><span class="line">    map.put(&quot;Action&quot;, &quot;AppVersion&quot;);</span><br><span class="line">    map.put(&quot;Version&quot;, &quot;ss&quot;);</span><br><span class="line">    map.put(&quot;Type&quot;, &quot;1&quot;);</span><br><span class="line"></span><br><span class="line">    String url = &quot;请求接口地址&quot; ;</span><br><span class="line">    OkHttpUtils.post()</span><br><span class="line">            .url(url)</span><br><span class="line">            .params(map)</span><br><span class="line">            .build()</span><br><span class="line">            .execute(new MyStringCallback());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 最后要在活动的onDestroy里重写取消与http的连接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> public void onPause() &#123;</span><br><span class="line">    super.onPause();</span><br><span class="line">    //取消网络请求,根据tag取消请求</span><br><span class="line">    OkHttpUtils.getInstance().cancelTag(this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>











      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/MrQlyn/MrQlyn.github.io/2019/07/14/Android/Android框架之OKHttpUtils/" data-id="ckib6px8g001f5gtp6k39wm7g" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android/Android的Bug" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/14/Android/Android的Bug/" class="article-date">
  <time datetime="2019-07-14T02:49:28.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/14/Android/Android的Bug/">Android的Bug</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>   一、failed to resolve</p>
<p> build.gradle文件报错：failed to resolve</p>
<p> 可能原因：</p>
<p> 1、可能是SDKTools工具版本与build.gradle文件里的版本号不一致</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">File-Settings-Appearance &amp; Behavior-&gt;System.Settigs-&gt;Android SDK-&gt;Android SDK Tools的版本号与gradle文件里的compileSdkVersion</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">、targetSdkVersion版本号不一致，</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure>

<p> 2、修改了drawable文件里的selector文件名，导致gradle文件里的引用错误。</p>
<p> 只需要删除掉gradle里的上一文件名相关引用即可。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/MrQlyn/MrQlyn.github.io/2019/07/14/Android/Android的Bug/" data-id="ckib6px8j001j5gtp2ji60vve" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android/Android框架之EventBus及Butterknife" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/14/Android/Android框架之EventBus及Butterknife/" class="article-date">
  <time datetime="2019-07-14T02:48:38.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/14/Android/Android框架之EventBus及Butterknife/">Android框架之EventBus及Butterknife</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>   一、EventBus：应用程序内各组件间、组件与后台线程间的通信。EventBus的核心在于：主线程发送消息、线程之间的通信，各组件传输数据，<strong>异步操作（开启子线程处理耗时任务）</strong>，发送粘性事件等操作。</p>
<p> 具体操作步骤：</p>
<blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;  1、需要在项目build.gradle里添加依赖 compile &apos;org.greenrobot:eventbus:3.0.0&apos;</span><br><span class="line">2、接收数据的类需要在onCreate里注册和在onDestroy里取消注册（注册后才能获得数据类（信息类））</span><br><span class="line">3、自定义数据类</span><br><span class="line">4、发送类通过EventBus.getDefault().post(new 自定义类)发送数据</span><br><span class="line">5、接收类自定一个接收方法,参数需要为自定义类，还需要在上方添加线程类型@Subscribe(threadMode =ThreadMode.MAIN)</span><br><span class="line">线程类型：</span><br><span class="line">POSTING（默认）:表示事件处理函数的线程跟发布事件的线程在同一个线程。</span><br><span class="line">MAIN:表示事件处理函数的线程在主线程（UI）线程，因此在这里不能进行耗时操作。</span><br><span class="line">BACKGROUND:表示事件处理函数的线程在后台线程，因此不能进行UI操作。如果发布事件的线程是主线程（UI线程），那么事件处理函数将会开启一个后台线程，如果果发布事件的线程是在后台线程，那么事件处理函数就使用该线程。</span><br><span class="line">ASYNC:表示无论事件发布的线程是哪一个，事件处理函数始终会新建一个子线程运行，同样不能进行UI操作。</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</blockquote>
<blockquote>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> //注册</span><br><span class="line">EventBus.getDefault().register( this );</span><br><span class="line">//取消注册</span><br><span class="line">EventBus.getDefault().unregister( this );</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"> //自定义数据类</span><br><span class="line">public class MyData &#123;</span><br><span class="line">    String name;</span><br><span class="line">    int age;</span><br><span class="line">    String address;</span><br><span class="line"></span><br><span class="line">    public MyData(String name, int age, String address) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">        this.age = age;</span><br><span class="line">        this.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getAddress() &#123;</span><br><span class="line">        return address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAddress(String address) &#123;</span><br><span class="line">        this.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> //接收方法</span><br><span class="line">@Subscribe(threadMode = ThreadMode.MAIN)    //threadMode为线程类型</span><br><span class="line">public void receiver(MyData data)&#123;    //3.0版本后方法名可以自取</span><br><span class="line">    //接收到数据后对数据类的操作，具体逻辑</span><br><span class="line">    String name;</span><br><span class="line">    int age;</span><br><span class="line">    String address;</span><br><span class="line">    name=data.getName();</span><br><span class="line">    age=data.getAge();</span><br><span class="line">    address=data.getAddress();</span><br><span class="line">    textView.setText( name+&quot;\n&quot;+age+address );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> //发送数据</span><br><span class="line">EventBus.getDefault().post(new MyData(&quot;张三&quot;,20,&quot;\n地球&quot;));</span><br></pre></td></tr></table></figure>

<p> 二、Butterknife：注解作用，根据布局控件id生成相应的后台代码，可省略findViewById()，setOnClickListener()，ListView的点击@OnItemClick, CheckBox的@OnCheckedChanged也可以实现省略操作</p>
<p> 具体操作步骤：</p>
<blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;  1、File-&gt;Settings-&gt;Plugins-&gt;butterknife Zelezny添加插件(添加过就不用再添加了)</span><br><span class="line"></span><br><span class="line">2、使用前需要在app下的build.gradle的dependencies下添加：</span><br><span class="line">compile &apos;com.jakewharton:butterknife:8.4.0&apos;</span><br><span class="line">annotationProcessor &apos;com.jakewharton:butterknife-compiler:8.4.0&apos;</span><br><span class="line"></span><br><span class="line">3、选中setContentView(R.layout.activity_main)这一行的布局文件activity_main：按快捷键</span><br><span class="line">alt+insert，选中相应的控件和事件，生成后台代码</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</blockquote>
<blockquote>
<p> *<em>可以一次指定多个id,为多个View绑定一个事件处理方法： *</em></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> //也可分离(spilt)处理@OnClick(R.id.button)，在生成代码时选中spilt按钮即可</span><br><span class="line">@OnClick(&#123;R.id.button, R.id.checkBox, R.id.content&#125;)</span><br><span class="line">public void onViewClicked(View view) &#123;</span><br><span class="line">    switch (view.getId()) &#123;</span><br><span class="line">        case R.id.button:</span><br><span class="line">            break;</span><br><span class="line">        case R.id.checkBox:</span><br><span class="line">            break;</span><br><span class="line">        case R.id.content:</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/MrQlyn/MrQlyn.github.io/2019/07/14/Android/Android框架之EventBus及Butterknife/" data-id="ckib6px8h001h5gtp9oengiir" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android/Android里的RecyclerView" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/14/Android/Android里的RecyclerView/" class="article-date">
  <time datetime="2019-07-14T02:47:44.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/14/Android/Android里的RecyclerView/">Android里的RecyclerView</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>   使用前需要导入依赖：</p>
<blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;  implementation &apos;com.android.support:recyclerview-v7:26.1.0&apos;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</blockquote>
<blockquote>
<p> RecyclerView：是ListView、GridView的升级版，很好地解决了耦合的问题，接下来详细讲解下RecyclerView的使用。</p>
</blockquote>
<p> 首先在layout里设置活动的布局，放置一个RecyclerView：</p>
<blockquote>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&gt;  &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;android.support.constraint.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</span><br><span class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=&quot;@+id/removeButton&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_marginBottom=&quot;9dp&quot;</span><br><span class="line">        android:layout_weight=&quot;1&quot;</span><br><span class="line">        android:text=&quot;删除&quot;</span><br><span class="line">        app:layout_constraintBottom_toTopOf=&quot;@+id/recycleview&quot;</span><br><span class="line">        app:layout_constraintEnd_toEndOf=&quot;parent&quot;</span><br><span class="line">        app:layout_constraintStart_toEndOf=&quot;@+id/addButton&quot;</span><br><span class="line">        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=&quot;@+id/addButton&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_marginBottom=&quot;9dp&quot;</span><br><span class="line">        android:layout_marginEnd=&quot;17dp&quot;</span><br><span class="line">        android:layout_marginStart=&quot;9dp&quot;</span><br><span class="line">        android:layout_weight=&quot;1&quot;</span><br><span class="line">        android:text=&quot;添加&quot;</span><br><span class="line">        app:layout_constraintBottom_toTopOf=&quot;@+id/recycleview&quot;</span><br><span class="line">        app:layout_constraintEnd_toStartOf=&quot;@+id/removeButton&quot;</span><br><span class="line">        app:layout_constraintHorizontal_chainStyle=&quot;packed&quot;</span><br><span class="line">        app:layout_constraintStart_toStartOf=&quot;parent&quot;</span><br><span class="line">        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;android.support.v7.widget.RecyclerView</span><br><span class="line">        android:id=&quot;@+id/recycleview&quot;</span><br><span class="line">        android:layout_width=&quot;0dp&quot;</span><br><span class="line">        android:layout_height=&quot;0dp&quot;</span><br><span class="line">        android:layout_marginBottom=&quot;12dp&quot;</span><br><span class="line">        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;</span><br><span class="line">        app:layout_constraintEnd_toEndOf=&quot;parent&quot;</span><br><span class="line">        app:layout_constraintStart_toStartOf=&quot;parent&quot;</span><br><span class="line">        app:layout_constraintTop_toBottomOf=&quot;@+id/removeButton&quot; /&gt;</span><br><span class="line">&lt;/android.support.constraint.ConstraintLayout&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
</blockquote>
<blockquote>
<p> 在Activity里获得RecyclerView的实例，同时设置适配器来设置RecyclerView的表现形式：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"> public class RecycleViewActivity extends Activity &#123;</span><br><span class="line">    @BindView(R.id.recycleview)</span><br><span class="line">    RecyclerView recycleview;</span><br><span class="line">    List&lt;People&gt; DataList;</span><br><span class="line">    @BindView(R.id.removeButton)</span><br><span class="line">    Button removeButton;</span><br><span class="line">    @BindView(R.id.addButton)</span><br><span class="line">    Button addButton;</span><br><span class="line"></span><br><span class="line">    //定义适配器</span><br><span class="line">    private MyAdapter adapter;</span><br><span class="line"></span><br><span class="line">    public void onCreate(Bundle bunle) &#123;</span><br><span class="line">        super.onCreate( bunle );</span><br><span class="line">        setContentView( R.layout.recycleviewlayout );</span><br><span class="line">        ButterKnife.bind( this );</span><br><span class="line"></span><br><span class="line">        //初始化子项数组数据</span><br><span class="line">        DataList = new ArrayList&lt;People&gt;();</span><br><span class="line">        initData();</span><br><span class="line">        //设置适配器,同时传入数据</span><br><span class="line">        adapter = new MyAdapter( this, DataList );</span><br><span class="line">        recycleview.setAdapter( adapter );</span><br><span class="line">        //创建LinearLayoutManager 对象 这里使用 LinearLayoutManager 是线性布局的意思</span><br><span class="line">        LinearLayoutManager layoutmanager = new LinearLayoutManager( this );</span><br><span class="line"></span><br><span class="line">        //滚动至索引值处的子项，此方法需要使用new LinearLayoutManager(this,LinearLayoutManager.VERTICAL,false )构造方法</span><br><span class="line">        //第二个参数指定布局垂直或水平，false为是否倒序</span><br><span class="line">        //LinearLayoutManager layoutmanager = new LinearLayoutManager(this,LinearLayoutManager.VERTICAL,false );</span><br><span class="line">        //layoutmanager.scrollToPosition( 19 );</span><br><span class="line"></span><br><span class="line">        //设置子项布局为横向</span><br><span class="line">        //layoutmanager.setOrientation( LinearLayoutManager.HORIZONTAL );</span><br><span class="line"></span><br><span class="line">        //设置RecyclerView 布局</span><br><span class="line">        recycleview.setLayoutManager( layoutmanager );</span><br><span class="line"></span><br><span class="line">        //使用网格布局，第二个参数为每行拥有的子项数</span><br><span class="line">        //GridLayoutManager gridLayoutManager=new GridLayoutManager( this,4,GridLayoutManager.HORIZONTAL,false);</span><br><span class="line">        //recycleview.setLayoutManager(gridLayoutManager);</span><br><span class="line"></span><br><span class="line">        //添加分割线,第一个参数上下文，第二个参数为布局方向</span><br><span class="line">        recycleview.addItemDecoration( new DividerItemDecoration( this, DividerItemDecoration.VERTICAL ) );</span><br><span class="line"></span><br><span class="line">        //使用自定义接口在外部设置点击事件</span><br><span class="line">        adapter.setItemClickListener( new MyAdapter.ItemClickListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onItemClick(int position) &#123;</span><br><span class="line">                if (position &gt; 2) &#123;</span><br><span class="line">                    Toast.makeText( RecycleViewActivity.this, &quot;我是大于3的地方&quot;, Toast.LENGTH_SHORT ).show();</span><br><span class="line">                &#125; else if (position == 2) &#123;</span><br><span class="line">                    Toast.makeText( RecycleViewActivity.this, &quot;我是=于3的地方&quot;, Toast.LENGTH_SHORT ).show();</span><br><span class="line">                &#125; else</span><br><span class="line">                    Toast.makeText( RecycleViewActivity.this, &quot;我是小于3的地方&quot;, Toast.LENGTH_SHORT ).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //初始化数据方法，同时传入适配器</span><br><span class="line">    private void initData() &#123;</span><br><span class="line">        for (int i = 0; i &lt; 6; i++) &#123;</span><br><span class="line">            DataList.add( new People( &quot;真理惟一可靠的标准就是永远自相符合。 —— 欧文&quot;, R.drawable.ouwen ) );</span><br><span class="line">            DataList.add( new People( &quot;土地是以它的肥沃和收获而被估价的；才能也是土地，不过它生产的不是&quot; +</span><br><span class="line">                    &quot;粮食，而是真理。如果只能滋生瞑想和幻想的话，即使再大的才能也只是砂地或盐池，那上面连小草也长不出来的。&quot;</span><br><span class="line">                    , R.drawable.bielin ) );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //添加子项和删除子项</span><br><span class="line">    @OnClick(&#123;R.id.removeButton, R.id.addButton&#125;)</span><br><span class="line">    public void onViewClicked(View view) &#123;</span><br><span class="line">        switch (view.getId()) &#123;</span><br><span class="line">            case R.id.removeButton:</span><br><span class="line">                adapter.removeItem( 0 );</span><br><span class="line">                break;</span><br><span class="line">            case R.id.addButton:</span><br><span class="line">                adapter.addItem( 0, new People( &quot;添加的数据&quot;, R.drawable.bielin ) );</span><br><span class="line">                //还需要滚动至添加位置</span><br><span class="line">                recycleview.scrollToPosition( 0 );</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 这里RecyclerView的很多属性需要适配器的匹配，所以我们要自定义一个适配器(RecyclerView.Adapter)，里面包括需要自定义一个子项视图保存类(RecyclerView.ViewHolder)来对子项布局及控件进行加载，DataList是外部传入的子项数据列表，需要与控件进行绑定，以下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"> //定义适配器类</span><br><span class="line">public class MyAdapter extends RecyclerView.Adapter&lt;MyAdapter.MyViewHolder&gt;&#123;</span><br><span class="line">    private Context context;</span><br><span class="line">    private List&lt;People&gt; DataList;</span><br><span class="line"></span><br><span class="line">    //编写导入数据的通用构造方法</span><br><span class="line">    MyAdapter(Context context, List&lt;People&gt; DataList)&#123;</span><br><span class="line">        this.context=context;</span><br><span class="line">        this.DataList=new ArrayList&lt;&gt;(DataList);</span><br><span class="line">    &#125;</span><br><span class="line">    /*</span><br><span class="line">    以下三个方法和一个类是必须要重写的方法</span><br><span class="line">     */</span><br><span class="line">    //ViewHolder(子项视图保存类)：将当前Item视图都实例化保存起来，避免反复调用findViewById方法，浪费资源</span><br><span class="line">    //此处不能使用Butterknife</span><br><span class="line">    class MyViewHolder extends RecyclerView.ViewHolder&#123;</span><br><span class="line">        TextView itemText;</span><br><span class="line">        ImageView itemImage;</span><br><span class="line">        public MyViewHolder(View itemView) &#123;</span><br><span class="line">            super( itemView );</span><br><span class="line">            itemText=itemView.findViewById( R.id.itemText );</span><br><span class="line">            itemImage=itemView.findViewById( R.id.itemImage );</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //创建ViewHolder实例并返回,加载item 的布局</span><br><span class="line">    @Override</span><br><span class="line">    public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) &#123;</span><br><span class="line">        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.itemlayout,parent,false);</span><br><span class="line">        MyViewHolder holder = new MyViewHolder(view);</span><br><span class="line">        return holder;</span><br><span class="line">    &#125;</span><br><span class="line">    //对RecyclerView子项数据进行赋值,将子项数据与ViewHolder里的控件进行绑定（设置）</span><br><span class="line">    @Override</span><br><span class="line">    public void onBindViewHolder(MyViewHolder holder, final int position) &#123;</span><br><span class="line">        holder.itemText.setText( DataList.get( position ).getData() );</span><br><span class="line">        holder.itemImage.setImageResource( DataList.get( position ).getImageId() );</span><br><span class="line">        //把图片进行按比例缩放</span><br><span class="line">        holder.itemImage.setScaleType( ImageView.ScaleType.FIT_CENTER );</span><br><span class="line"></span><br><span class="line">        //自定义点击事件(直接在Adapter类重写点击事件)</span><br><span class="line">        /*holder.itemView.setOnClickListener( new View.OnClickListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onClick(View view) &#123;</span><br><span class="line">                Toast.makeText( context, &quot;&quot;+position,Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; );*/</span><br><span class="line"></span><br><span class="line">        //自定义点击事件（点击后触发的是：holder.itemView.setOnClickListener方法，</span><br><span class="line">        //然后调用自定义监听时间接口的onItemClick(position)方法，具体执行代码由外部实现）</span><br><span class="line">        if (myItemClickListener != null) &#123;</span><br><span class="line">            holder.itemView.setOnClickListener( new View.OnClickListener() &#123;</span><br><span class="line"></span><br><span class="line">                @Override</span><br><span class="line">                public void onClick(View v) &#123;</span><br><span class="line">                    myItemClickListener.onItemClick(position );</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //返回子项(Item)个数</span><br><span class="line">    @Override</span><br><span class="line">    public int getItemCount() &#123;</span><br><span class="line">        return DataList.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //自定义监听事件接口ItemClickListener ，和在Adapter类里的引用myItemClickListener</span><br><span class="line">    private ItemClickListener myItemClickListener;</span><br><span class="line">    public interface ItemClickListener&#123;</span><br><span class="line">        void onItemClick( int position);//点击监听事件，在外部实现</span><br><span class="line">    &#125;</span><br><span class="line">    //让外部能够使用setItemClickListener给ItemClickListener内部引用赋值</span><br><span class="line">    public void setItemClickListener(ItemClickListener myItemClickListener) &#123;</span><br><span class="line">        this.myItemClickListener = myItemClickListener;</span><br><span class="line">    &#125;</span><br><span class="line">    //让外部能添加和删除Item的方法</span><br><span class="line">    public void addItem(int position,People people)&#123;</span><br><span class="line">        DataList.add( position,people );</span><br><span class="line">        //增添动作刷新适配器</span><br><span class="line">        notifyItemInserted( position );</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    public void removeItem(int position)&#123;</span><br><span class="line">        DataList.remove( position );</span><br><span class="line">        //删除动作刷新适配器</span><br><span class="line">        notifyItemRemoved( position );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 这里面onCreateViewHolder方法加载了子项的布局，在这使用图片加文本的子项布局</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"> &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;RelativeLayout android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;134dp&quot;</span><br><span class="line">    android:layout_alignParentTop=&quot;true&quot;</span><br><span class="line">    android:layout_marginTop=&quot;92dp&quot;</span><br><span class="line">    android:layout_toEndOf=&quot;@+id/itemText&quot;</span><br><span class="line">    android:layout_toRightOf=&quot;@+id/itemText&quot;</span><br><span class="line">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;ImageView</span><br><span class="line">        android:id=&quot;@+id/itemImage&quot;</span><br><span class="line">        android:layout_width=&quot;109dp&quot;</span><br><span class="line">        android:layout_height=&quot;134dp&quot;</span><br><span class="line">        android:layout_alignParentLeft=&quot;true&quot;</span><br><span class="line">        android:layout_alignParentStart=&quot;true&quot;</span><br><span class="line">        android:layout_alignParentTop=&quot;true&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=&quot;@+id/itemText&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;</span><br><span class="line">        android:layout_alignParentLeft=&quot;true&quot;</span><br><span class="line">        android:layout_alignParentStart=&quot;true&quot;</span><br><span class="line">        android:layout_alignParentTop=&quot;true&quot;</span><br><span class="line">        android:layout_marginLeft=&quot;108dp&quot;</span><br><span class="line">        android:layout_marginStart=&quot;108dp&quot;</span><br><span class="line">        android:layout_weight=&quot;1&quot;</span><br><span class="line">        android:gravity=&quot;center&quot; /&gt;</span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure>

<p> 最后：是数据类，每个数据代表了一张图片（R.drawable.pictureName的数据ID：int型）和文本显示的数据（String型）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> //自定义数据类</span><br><span class="line">public class People &#123;</span><br><span class="line">    private String Data;    //TextView里存放的文本数据</span><br><span class="line">    private int ImageId;    //ImageView里存放的图片数据（在R.drawable.里的用int形式）</span><br><span class="line">    People(String Data, int ImageId)&#123;</span><br><span class="line">        this.Data=Data;</span><br><span class="line">        this.ImageId=ImageId;</span><br><span class="line">    &#125;</span><br><span class="line">    public String getData() &#123;</span><br><span class="line">        return Data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setData(String data) &#123;</span><br><span class="line">        Data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getImageId() &#123;</span><br><span class="line">        return ImageId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setImageId(int imageId) &#123;</span><br><span class="line">        ImageId = imageId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String toString()&#123;</span><br><span class="line">        return Data+String.valueOf( ImageId );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/MrQlyn/MrQlyn.github.io/2019/07/14/Android/Android里的RecyclerView/" data-id="ckib6pxd500765gtpuelq6u0s" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Android/Android进阶控件" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/14/Android/Android进阶控件/" class="article-date">
  <time datetime="2019-07-14T02:45:39.000Z" itemprop="datePublished">2019-07-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/14/Android/Android进阶控件/">Android进阶控件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="一、自定义通知Notification：自己定义通知Notification下拉后的显示样式"><a href="#一、自定义通知Notification：自己定义通知Notification下拉后的显示样式" class="headerlink" title="一、自定义通知Notification：自己定义通知Notification下拉后的显示样式"></a>一、自定义通知Notification：自己定义通知Notification下拉后的显示样式</h3><p> 注意：以下有些方法需要在build.gradle里修改minSdkVersion 21才能使用</p>
<p> 只需在构建普通Notification的构建器builder上添加对bigContentView属性设置为RemoteView（自定义的通知样式），如需要对通知展开视图RemoteView里的UI控件设置监听，需要通过设置广播和RemoteView的setOnClickPendingIntent()方法配合使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"> Notification notification;</span><br><span class="line">NotificationManager manager;</span><br><span class="line">static Receive receive;</span><br><span class="line">//发送自定义视图的通知</span><br><span class="line">public void sendNotification()&#123;</span><br><span class="line">    Notification.Builder builder=new Notification.Builder(this);</span><br><span class="line">    builder.setSmallIcon(R.drawable.ic_launcher_background); //设置小图标（未展开上方显示图标）</span><br><span class="line">    builder.setTicker(&quot;QlynMusic又出新歌了，快来收听吧&quot;);	  //显示最先在顶部收到的通知</span><br><span class="line">    builder.setWhen(System.currentTimeMillis()); //发送时间</span><br><span class="line">    builder.setAutoCancel(false);//点击通知后是否取消通知</span><br><span class="line">    builder.setWhen(System.currentTimeMillis());//设置通知的时间</span><br><span class="line">    //setVisibility用来设置通知在什么情况下会显示</span><br><span class="line">    /*</span><br><span class="line">        Notification.VISIBILITY_PUBLIC：任何情况都会显示通知。</span><br><span class="line">        Notification.VISIBILITY_PRIVATE：只有在没有锁屏时会显示通知。</span><br><span class="line">        Notification.VISIBILITY_SECRET：在pin、password等安全锁和没有锁屏的情况下才能够显示通知。</span><br><span class="line">     */</span><br><span class="line">    builder.setVisibility( Notification.VISIBILITY_PUBLIC );</span><br><span class="line"></span><br><span class="line">    //设置通知响应的事件Activity,PendingIntent可以理解为延迟的Intent</span><br><span class="line">    Intent intent =new Intent (this,MainActivity.class);</span><br><span class="line">    PendingIntent pendingIntent =PendingIntent.getActivity(this, 0, intent,0);</span><br><span class="line">    builder.setContentIntent(pendingIntent);</span><br><span class="line"></span><br><span class="line">    //设置通知振动：下标为偶数表示静止时长，奇数为振动时长，单位为毫秒</span><br><span class="line">    //需在注册地方声明权限:</span><br><span class="line">    //&lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;</span><br><span class="line">    long[] vibrates= &#123;0,1000,1000,1000&#125;;//此时立即振动，然后静止一秒，再振动一次</span><br><span class="line">    builder.setVibrate(vibrates);</span><br><span class="line"></span><br><span class="line">    //构建一条通知Notification</span><br><span class="line">    notification=builder.build();</span><br><span class="line">    //获得自定义视图</span><br><span class="line">    remoteViews=new RemoteViews( getPackageName(),R.layout.information );</span><br><span class="line">    //设置remote里的显示图片</span><br><span class="line">    remoteViews.setImageViewResource( R.id.nAlbum, android.R.drawable.btn_star_big_on);</span><br><span class="line">    remoteViews.setImageViewResource( R.id.nAppIcon, R.mipmap.ic_launcher);</span><br><span class="line">    remoteViews.setImageViewResource( R.id.nLastSong, android.R.drawable.ic_media_previous);</span><br><span class="line">    if(mediaPlayer.isPlaying())&#123;</span><br><span class="line">        remoteViews.setImageViewResource( R.id.nPlay, R.drawable.pause);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        remoteViews.setImageViewResource( R.id.nPlay, R.drawable.play);</span><br><span class="line">    &#125;</span><br><span class="line">    remoteViews.setImageViewResource( R.id.nNextSong, android.R.drawable.ic_media_ff);</span><br><span class="line"></span><br><span class="line">    //设置RemoteViews里的控件监听，与广播接收器配合使用。</span><br><span class="line">    intent = new Intent(&quot;play&quot;);//设置intent的Action</span><br><span class="line">    PendingIntent pIntentPause = PendingIntent.getBroadcast(this, 0,</span><br><span class="line">            intent, 0);</span><br><span class="line">    remoteViews.setOnClickPendingIntent(R.id.nPlay, pIntentPause);</span><br><span class="line">    intent = new Intent(&quot;lastSong&quot;);//设置intent的Action</span><br><span class="line">    pIntentPause = PendingIntent.getBroadcast(this, 0,</span><br><span class="line">            intent, 0);</span><br><span class="line">    remoteViews.setOnClickPendingIntent(R.id.nLastSong, pIntentPause);</span><br><span class="line">    intent = new Intent(&quot;nastSong&quot;);//设置intent的Action</span><br><span class="line">    pIntentPause = PendingIntent.getBroadcast(this, 0,</span><br><span class="line">            intent, 0);</span><br><span class="line">    remoteViews.setOnClickPendingIntent(R.id.nNextSong, pIntentPause);</span><br><span class="line"></span><br><span class="line">    //将自定义视图传入通知的展开视图</span><br><span class="line">    notification.bigContentView=remoteViews;</span><br><span class="line">    //发送通知</span><br><span class="line">    manager = (NotificationManager) getSystemService( NOTIFICATION_SERVICE );</span><br><span class="line">    manager.notify( 1,notification );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 1、在AndroidManifest.xml里注册一个广播接受类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> &lt;receiver android:name=&quot;.MainActivity$Receive&quot;&gt;</span><br><span class="line">&lt;/receiver&gt;</span><br></pre></td></tr></table></figure>

<p> 2、定义广播接受类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"> class Receive extends BroadcastReceiver &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onReceive(Context context, Intent intent) &#123;</span><br><span class="line">        String action = intent.getAction();</span><br><span class="line">        switch (action) &#123;</span><br><span class="line">            case &quot;play&quot;:</span><br><span class="line">                if (mediaPlayer.isPlaying()) &#123;</span><br><span class="line">                    mediaPlayer.pause();</span><br><span class="line">                    play.setImageDrawable( getResources().getDrawable( R.drawable.play ) );</span><br><span class="line">                    remoteViews.setImageViewResource( R.id.nPlay, R.drawable.play );</span><br><span class="line">                    notification.bigContentView=remoteViews;</span><br><span class="line">                    manager.notify( 1, notification );  //notify可以直接更新通知Notification</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    mediaPlayer.start();</span><br><span class="line">                    play.setImageDrawable( getResources().getDrawable( R.drawable.pause ) );</span><br><span class="line">                    remoteViews.setImageViewResource( R.id.nPlay, R.drawable.pause );</span><br><span class="line">                    notification.bigContentView=remoteViews;</span><br><span class="line">                    manager.notify( 1, notification );  //notify可以直接更新通知Notification</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">            case &quot;lastSong&quot;:</span><br><span class="line"></span><br><span class="line">                break;</span><br><span class="line">            case &quot;nextSong&quot;:</span><br><span class="line"></span><br><span class="line">                break;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 3、在onCreate()方法里启用广播接收器，在onDestroy()方法里关闭广播接收器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> //开启广播接收器:不能在sendNotification里注册，因为该方法在监听方法里注册，会造成多次执行onReceiver方法情况</span><br><span class="line">receive = new Receive();</span><br><span class="line">IntentFilter filter = new IntentFilter();</span><br><span class="line">filter.addAction(&quot;play&quot;);   //设置广播接收器监听的Action</span><br><span class="line">registerReceiver(receive, filter);</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">@Override</span><br><span class="line">protected void onDestroy() &#123;</span><br><span class="line">    super.onDestroy();</span><br><span class="line">    //关闭广播接收器</span><br><span class="line">    unregisterReceiver( receive );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/MrQlyn/MrQlyn.github.io/2019/07/14/Android/Android进阶控件/" data-id="ckib6px8t001x5gtpt5jmr01x" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/5/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java基础/">Java基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/">Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web高阶/">Web高阶</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/基础操作/">基础操作</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构与算法/">数据结构与算法</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 18.57px;">Android</a> <a href="/tags/C/" style="font-size: 12.86px;">C++</a> <a href="/tags/Git/" style="font-size: 11.43px;">Git</a> <a href="/tags/Java基础/" style="font-size: 15.71px;">Java基础</a> <a href="/tags/Web/" style="font-size: 20px;">Web</a> <a href="/tags/Web高阶/" style="font-size: 18.57px;">Web高阶</a> <a href="/tags/前端/" style="font-size: 14.29px;">前端</a> <a href="/tags/基础操作/" style="font-size: 10px;">基础操作</a> <a href="/tags/数据库/" style="font-size: 15.71px;">数据库</a> <a href="/tags/数据结构与算法/" style="font-size: 17.14px;">数据结构与算法</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/07/14/前端/Bootstrap笔记（二）/">Bootstrap笔记（二）</a>
          </li>
        
          <li>
            <a href="/2019/07/14/前端/Bootstrap笔记（一）/">Bootstrap笔记（一）</a>
          </li>
        
          <li>
            <a href="/2019/07/14/Web高阶/SpringBoot开发总结/">SpringBoot开发总结</a>
          </li>
        
          <li>
            <a href="/2019/07/14/Web高阶/springboot项目中使用mybatis逆向工程生成代码实例/">springboot项目中使用mybatis逆向工程生成代码实例</a>
          </li>
        
          <li>
            <a href="/2019/07/14/Web高阶/SpringMVC对网页发来的数据请求处理和转发/">SpringMVC对网页发来的数据请求处理和转发</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Qin Lin<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>